<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>标签: 原创 - SUNX的记录</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SUNX的记录"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SUNX的记录"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="今天的天气不错"><meta property="og:type" content="blog"><meta property="og:title" content="SUNX的记录"><meta property="og:url" content="https://duohangsun.gitee.io/"><meta property="og:site_name" content="SUNX的记录"><meta property="og:description" content="今天的天气不错"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://duohangsun.gitee.io/img/og_image.png"><meta property="article:author" content="SUNX"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://duohangsun.gitee.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://duohangsun.gitee.io"},"headline":"SUNX的记录","image":["https://duohangsun.gitee.io/img/og_image.png"],"author":{"@type":"Person","name":"SUNX"},"publisher":{"@type":"Organization","name":"SUNX的记录","logo":{"@type":"ImageObject","url":"https://duohangsun.gitee.io/img/logo.svg"}},"description":"今天的天气不错"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?69225dadb01d44aae3f8c4f29649a59d";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SUNX的记录" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">目录</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="My GitHub" href="/"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">标签</a></li><li class="is-active"><a href="#" aria-current="page">原创</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-12-04T06:10:40.000Z" title="2023/12/4 14:10:40">2023-12-04</time>发表</span><span class="level-item"><time dateTime="2023-12-04T07:09:47.236Z" title="2023/12/4 15:09:47">2023-12-04</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a></span><span class="level-item">几秒读完 (大约89个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/12/04/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E6%96%B9%E5%90%91%E7%A0%94%E7%A9%B6%EF%BC%88%E5%9B%9B%E6%96%B9%E5%90%91%E3%80%81%E5%85%AB%E6%96%B9%E5%90%91%E3%80%81%E5%8D%81%E5%85%AD%E6%96%B9%E5%90%91%E7%AD%89%EF%BC%89/">路径规划方向研究（四方向、八方向、十六方向等）</a></p><div class="content"><h1><span id="路径规划-方向数量对算法效率的影响">路径规划 方向数量对算法效率的影响</span></h1><p><img src="https://pic1.zhimg.com/v2-f01c613db427d34cd12c27065aa26d80_b.jpg" alt="img"></p>
<p>四方向的位移序列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">offsets = [(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (-<span class="number">1</span>, <span class="number">0</span>)]</span><br></pre></td></tr></table></figure>

<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202312041453944.png" alt="image-20231204145348327"></p>
<p>八方向的位移序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">offsets = [(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">1</span>, -<span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">1</span>), (-<span class="number">1</span>, <span class="number">0</span>), (-<span class="number">1</span>, <span class="number">0</span>), (-<span class="number">1</span>, -<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>十六方向的位移序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">offsets = [(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">1</span>, -<span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">1</span>), (-<span class="number">1</span>, <span class="number">0</span>), (-<span class="number">1</span>, <span class="number">0</span>), (-<span class="number">1</span>, -<span class="number">1</span>),</span><br><span class="line">           (<span class="number">1</span>, -<span class="number">2</span>), (<span class="number">2</span>, -<span class="number">1</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (-<span class="number">1</span>, <span class="number">2</span>), (-<span class="number">2</span>, <span class="number">1</span>), (-<span class="number">2</span>, -<span class="number">1</span>), (-<span class="number">1</span>, -<span class="number">2</span>)]</span><br></pre></td></tr></table></figure>

<p>三十二方向的位移序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">offsets = [(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">1</span>, -<span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">1</span>), (-<span class="number">1</span>, <span class="number">0</span>), (-<span class="number">1</span>, <span class="number">0</span>), (-<span class="number">1</span>, -<span class="number">1</span>),</span><br><span class="line">           (<span class="number">1</span>, -<span class="number">2</span>), (<span class="number">2</span>, -<span class="number">1</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (-<span class="number">1</span>, <span class="number">2</span>), (-<span class="number">2</span>, <span class="number">1</span>), (-<span class="number">2</span>, -<span class="number">1</span>), (-<span class="number">1</span>, -<span class="number">2</span>),</span><br><span class="line">           (<span class="number">1</span>, -<span class="number">3</span>), (<span class="number">2</span>, -<span class="number">3</span>), (<span class="number">3</span>, -<span class="number">2</span>), (<span class="number">3</span>, -<span class="number">1</span>), (<span class="number">3</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">3</span>),</span><br><span class="line">           (-<span class="number">1</span>, <span class="number">3</span>), (-<span class="number">2</span>, <span class="number">3</span>), (-<span class="number">3</span>, <span class="number">2</span>), (-<span class="number">3</span>, <span class="number">1</span>), (-<span class="number">3</span>, -<span class="number">1</span>), (-<span class="number">3</span>, -<span class="number">2</span>), (-<span class="number">2</span>, -<span class="number">3</span>), (-<span class="number">1</span>, -<span class="number">3</span>)]</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-27T02:32:09.000Z" title="2023/11/27 10:32:09">2023-11-27</time>发表</span><span class="level-item"><time dateTime="2023-11-27T06:03:27.191Z" title="2023/11/27 14:03:27">2023-11-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a></span><span class="level-item">11 分钟读完 (大约1581个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/27/Particle-swarm-optimization-based-co-operative-task-assignment-and-path-planning-for-multi-agent-system/">Particle swarm optimization based co-operative task assignment and path planning for multi-agent system</a></p><div class="content"><h1><span id="particle-swarm-optimization-based-co-operative-task-assignment-and-path-planning-for-multi-agent-system">Particle swarm optimization based co-operative task assignment and path   planning for multi-agent system</span></h1><blockquote>
<p>[!WARNING]+ <center>🐣 总结</center>  </p>
<p>🎯 研究问题::<br>🔎 研究背景::<br>🚀 研究方法::<br>🐔 研究思路::<br>📺 主要内容::  本文提出了一种多智能体系统的合作路径规划和任务分配框架。<br>🎉 研究结论::  本文的重点是开发一种将任务分配与路径规划问题相结合的三层框架。在任务完成和路径搜索期间，该优化算法具有安全导航能力，确保路径无碰撞。在多代理系统中，即使在非常复杂的动态环境中，代理也能通过访问所有目标位置来完成给定任务。分析表明，所提出的框架非常容易实现，而且它能通过完成任何类型的指定任务轻松找到最佳解决方案。今后，我们将在实时场景中应用该框架。<br>🗝️ 创新点::<br>💩 研究局限::<br>🐾 研究展望::<br>✏️ 备注::  </p>
</blockquote>
<h2><span id="conclusion">CONCLUSION</span></h2><p>文章重点是开发一种任务分配与路径规划问题相结合的框架。<br>该框架具有：</p>
<ul>
<li>安全导航能力</li>
<li>多路径无碰撞</li>
<li>能完成给定任务</li>
</ul>
<h2><span id="abstract">Abstract</span></h2><p>本文提出了一种多智能体系统的合作路径规划和任务分配框架。对于候选算法来说，要处理动态环境中的多个智能体是比较困难的，在这种情况下，需要重新规划一条新的路径，以在不发生任何碰撞的情况下执行给定的任务。为了解决这个问题，这里提出了一种基于粒子群优化的路径规划算法，为在某些规定任务下工作的多智能体系统寻找最优路径。结果表明，由于采用了反应式管理结构，所提出的框架非常有效，能够成功完成任务。仿真结果表明，它是解决合作路径规划问题的一种可靠而稳健的方法。</p>
<p>文章问题场景是：</p>
<ul>
<li>动态场景</li>
<li>多智能体</li>
<li>无碰撞合作式路径规划</li>
<li>完成给定任务</li>
</ul>
<p>文章使用的基础算法是：</p>
<ul>
<li><p>粒子群算法 Particle Swarm Optimization</p>
</li>
<li><p>环境运行空间是连续空间</p>
</li>
</ul>
<h2><span id="simulation-results-and-discussions">SIMULATION RESULTS AND DISCUSSIONS</span></h2><p>实验环境</p>
<ul>
<li>MATLAB R2015b</li>
</ul>
<p>预备的参数组合如下：</p>
<p>$\omega&#x3D; 1.0$, $c1 &#x3D; 0.5$, $c2 &#x3D; 2.0$, Population size of swarms (agents) &#x3D; 25 and Maximum iterations &#x3D; 50.</p>
<p>避免碰撞策略所考虑的参数如下：</p>
<p>$\omega&#x3D; 1.0$, $c1 &#x3D; 3.0$, $c2 &#x3D; 4.0$,</p>
<p>这些增加的参数值有助于被捕获的粒子恢复。</p>
<p>为了评估整个框架的性能，我们模拟了几种不同情况的测试。我们将一个二维环境视为搜索空间，并考虑了不同类型的工作环境、不同类型的障碍物和不同数量的任务分配。工作空间的大小为 120 × 120 平方单位的地图。为简化起见，考虑了双智能体系统。每种配置均模拟运行 20 次。</p>
<p>实心圆代表静态障碍物，空心圆代表动态障碍物（图 2-8）。空心圆的序列代表动态障碍物的运动轨迹。动态障碍物可以是速度恒定的物体，也可以是随机移动的物体。路径上的圆圈表示智能体。在这种 SRVPSO 算法中，目标位置和目的位置周围考虑了 5-8 % 的容差区。菱形代表智能体需要访问的目标位置</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/Particle-swarm-optimization-based-co-operative-task-assignment-and-path-planning-for-multi-agent-system2.png" alt="image-20231127104050741"></p>
<p>图 2 显示了智能体没有任务分配且只考虑静态障碍物时的路径规划结果。两个智能体都规划了到达目标位置的路径，它们之间没有任何冲突。图 3 描述了在相同环境中分配任务后的无碰撞路径。这里，为智能体分配了四个目标位置 {(20,40)、(40,70)、(60,30) 和 (70,35)}，以便它们在目标点 (80,80) 完成任务。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311271403043.png" alt="image-20231127104755443"></p>
<p>如图3的相同任务分配，并增加动态障碍的路径规划序列截图如图 4 所示，动态环境由两个静态障碍物和一个动态障碍物组成。动态障碍物半径为 3 个单位，以固定速度从点（20，60）移动到点（43，22）。该规划的计算时间仅需 1.9 秒。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311271048542.png" alt="image-20231127104833402"></p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311271049871.png" alt="image-20231127104908657"></p>
<p>图 5 和图 6 显示了在相同动态环境中不同目标数量下的规划情况。在图 5 中，智能体被分配了 6 个目标，而在图 6 中，智能体访问了 10 个目标并最终到达目标。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/Particle-swarm-optimization-based-co-operative-task-assignment-and-path-planning-for-multi-agent-system6.png" alt="image-20231127104932345"></p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/Particle-swarm-optimization-based-co-operative-task-assignment-and-path-planning-for-multi-agent-system7.png" alt="image-20231127105010685"></p>
<p>图 7 和图 8 所示的搜索空间是一个更加复杂的动态环境，由三个静态障碍物和两个动态障碍物组成。两个动态障碍物的移动方向不同。一个半径为 “3 “个单位的动态障碍物从位置（20，70）移动到（66，1），而另一个半径为 “2 “个单位的移动障碍物则从位置（10，30）移动到（60，30）。图 7 的目标位置与图 8 的目标位置不同。在这个工作区中，智能体需要覆盖 14 个目标位置。完成任务所需的计算时间约为 8.1 秒。在某些图中，我们发现智能体无法到达特定的目标位置。不过，它们能够在容差范围内到达非常接近这些地点的地方。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/Particle-swarm-optimization-based-co-operative-task-assignment-and-path-planning-for-multi-agent-system8.png" alt="image-20231127105044091"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T12:28:34.000Z" title="2023/11/24 20:28:34">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-11-24T12:36:01.699Z" title="2023/11/24 20:36:01">2023-11-24</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/MATLAB/">MATLAB</a></span><span class="level-item">1 分钟读完 (大约170个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/24/MATLAB-%E6%8F%92%E6%A1%A9%E8%BE%93%E5%87%BA/">MATLAB 插桩输出</a></p><div class="content"><h1><span id="matlab-插桩输出">MATLAB 插桩输出</span></h1><p>该方法主要用于程序调试阶段：</p>
<p>通过该方法可以将程序的运行过程记录到文件中，以便自己分析MATLAB程序存在何种问题。</p>
<p>关于插桩技术的引用可以参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43571647/article/details/134310973">【python算法】迪杰斯特拉算法 python实现-CSDN博客</a></p>
<p>主要利用输出语句</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print_log =  fopen(<span class="string">&#x27;test_record.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;n&#x27;</span>,<span class="string">&#x27;UTF-8&#x27;</span>);</span><br><span class="line">fprintf(print_log, <span class="string">&quot;\n\ntime: %s\n&quot;</span>, datestr(now,<span class="number">0</span>));  <span class="comment">% 输出程序运行时间</span></span><br><span class="line">fprintf(print_log, <span class="string">&quot;******************************************\n&quot;</span> + ...</span><br><span class="line">        <span class="string">&quot;Algorithm&quot;</span>\n********************************************\n<span class="string">&quot;); % 输出分割线</span></span><br><span class="line"><span class="string">fprintf(print_log, &#x27;the Astar cost value is %d. \n&#x27;, AStar_cost);</span></span><br><span class="line"><span class="string">fprintf(print_log, &#x27;the ThetaStar cost value is %d. \n&#x27;, ThetaStar_cost);</span></span><br><span class="line"><span class="string">fclose(print_log);</span></span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-22T01:51:32.000Z" title="2023/11/22 09:51:32">2023-11-22</time>发表</span><span class="level-item"><time dateTime="2023-11-24T12:16:30.683Z" title="2023/11/24 20:16:30">2023-11-24</time>更新</span><span class="level-item">2 小时读完 (大约14070个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/22/Theta-Any-Angle-Path-Planning-on-Grids/">Theta*: Any-Angle Path Planning on Grids</a></p><div class="content"><h1><span id="theta-any-angle-path-planning-on-grids">Theta*: Any-Angle Path Planning on Grids</span></h1><h2><span id="翻译">翻译</span></h2><h3><span id="摘要">摘要</span></h3><p>在机器人和视频游戏中，通常使用带有阻塞和非阻塞单元的栅格来表示地形。然而，栅格边缘形成的路径可能比地形中真正的最短路径更长，因为它们的方向受到人为限制。为了避免这一缺陷，我们提出了两种适用于任意角度的新的正确、完整的路径规划算法。&#x3D;&#x3D;基本 Theta* 算法和角度传播 Theta* 算法都是 A* 算法的变种，它们沿栅格边缘传播信息，而不将路径限制在栅格边缘&#x3D;&#x3D;。&#x3D;&#x3D;基本 Theta* 算法易于理解和实现，速度快，能找到短路径。但是，它不能保证找到真正的最短路径。&#x3D;&#x3D;角度传播 Theta* 通过在顶点展开时传播角度范围，在每个顶点进行展开时，角度传播Theta* 实现了比基本 Theta* 更佳最坏情况复杂度，但更复杂、更慢，而且找到的路径稍长。我们将基本 Theta* 和角度传播 Theta* 统称为 Theta<em>。Theta</em> 具有独特的特性，我们将对其进行详细分析。我们通过实验证明，它找到的路径比具有反向平滑路径的 A*  和 Field D* （我们所知的唯一一个沿着栅格边缘传播信息而不将路径限制在栅格边缘的 A*  版本）都要短，而且运行时间与栅格上的 A* 相当。最后，我们将 Theta* 扩展到包含非阻塞单元且遍历代价不均匀的栅格，并引入了 Theta* 的变体，在路径长度和运行时间之间做出了不同的权衡。</p>
<h3><span id="1introduction">1.Introduction</span></h3><p>在本文中，我们研究的是机器人和视频游戏（Choset, Lynch, Hutchinson, Kantor, Burgard, Kavraki, &amp; Thrun, 2005; Deloura, 2000; Patel, 2000; Murphy, 2000; Rabin, 2002）的路径规划，其中二维连续地形被离散化为一个栅格，栅格中有受阻单元和未受阻单元。我们的目标是从给定的起点顶点到给定的目标顶点（均位于单元的四角）找到一条短的无阻塞路径。A* 能快速找到栅格路径（即受限于栅格边的路径），但栅格路径往往不是真正的最短路径（即地形中的最短路径），因为它们的潜在方向被人为限制为 45 度的倍数，如图 1(a) 所示（Yap，2002 年）。这一缺陷导致我们提出了所谓的任意角度路径规划（Nash、Daniel、Koenig 和 Felner，2007；Ferguson 和 Stentz，2006）。如图 1(b) 所示，任意角度路径规划算法可以在不限制路径标题的情况下找到路径。我们提出了两种新的正确、完整的任意角度路径规划算法。基本 Theta* 和角度传播 Theta* 都是 A* 的变种，它们沿着栅格边缘传播信息（以实现较短的运行时间），而不将路径约束在栅格边缘（以找到任意角度路径）。与可见性图上的 A* 不同，它们不能保证找到真正的最短路径。因此，它们名称中的星号并不表示它们的最优性，而是表示它们与 A* 的相似性。基本 Theta* 容易理解和实现，速度快且能找到短路径。角度传播 Theta* 通过在扩展顶点时传播角度范围，实现了每个顶点扩展的最坏情况复杂度，该复杂度是恒定的，而不是与单元格数量成线性关系（就像基本 Theta* 的复杂度），但复杂度更高，速度不快，找到的路径稍长。我们将基本 Theta* 和角度传播 Theta* 统称为 Theta<em>。Theta</em> 具有独特的特性，我们将对其进行详细分析。我们通过实验证明，它找到的路径比带有后平滑路径的 A* 和 Field D* （我们所知道的唯一一种沿着栅格边缘传播信息而不将路径限制在栅格边缘的 A* 版本）都要短，而且运行时间与 A* 在栅格上的运行时间相当。最后，我们将 Theta* 扩展到包含具有非均匀遍历成本的无阻塞单元格的栅格，并引入了 Theta* 的变体，这些变体在路径长度和运行时间之间做出了不同的权衡。</p>
<h3><span id="2-path-planning-problem-and-notation">2. Path-Planning Problem and Notation</span></h3><p>在本节中，我们将介绍本文所研究的路径规划问题，即在具有大小一致的阻塞和非阻塞单元的八邻栅格上进行路径规划。单元格被标记为受阻（灰色）或未受阻（白色）。我们使用单元格的边角（而不是中心）作为顶点。S 是所有顶点的集合。路径规划问题是找到一条从给定起点顶点 $s_{start}$ 到给定目标顶点 $s_{goal}$ 的畅通路径。</p>
<p>如果路径上的每个顶点都能看到路径上的后继顶点，那么这条路径就是畅通无阻的。如果从顶点 $s$ 到顶点 $s′$ 的直线既不经过受阻单元的内部，也不经过共享一条边的受阻单元之间，则顶点 $s$ 与顶点 $s′$ 具有视线，记为 $LineOfSight(s,s′)$。附录 A 给出了实现视线函数的伪代码。&#x3D;&#x3D;为简单起见，我们允许一条直线在对角相邻的受阻单元之间通过。&#x3D;&#x3D;</p>
<p>$c(s,s′)$ 是顶点 $s$ 到顶点 $s′$ 的直线长度。$nghbr s_{vis}(s)$ 是顶点 $s$ 在八个罗盘方向上的可见相邻点集合，即顶点 $s$ 的相邻点中与顶点 $s$ 有视线的那些。图 1 显示了一个例子，顶点 B4 的可见邻域是顶点 A3、A4、A5、B3、B5、C3 和 C4。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221123053.png" alt="img"></p>
<h3><span id="3-existing-terrain-discretizations">3. Existing Terrain Discretizations</span></h3><p>连续地形需要离散化才能进行路径规划。在本节中，我们将栅格与其他现有的地形离散化方法进行比较。我们使用栅格对地形进行离散化，因为栅格被广泛应用于机器人和视频游戏中（Deloura, 2000; Murphy, 2000; Rabin, 2004），并具有一些理想的特性：</p>
<ul>
<li><p>栅格是一种简单的数据结构，可以实现简单的路径规划算法。</p>
</li>
<li><p>通过在地形上铺设栅格，并将所有部分或完全受阻的单元标注为受阻，就可以轻松地将地形离散成栅格。</p>
</li>
<li><p>栅格提供了连续地形中所有可穿越表面的全貌。当路径规划算法在动态环境中使用并必须与导航规划器交互时，这一点至关重要。例如，如果一个机器人或视频游戏角色的路径遇到临时阻塞，它可以很容易地判断是向左转（未受阻）还是向右转（受阻）最好（Tozour，2004 年）。</p>
</li>
<li><p>除了可穿越性之外，单元格还可以存储其他信息，例如该单元格对应的地形区域中隐藏的黄金数量，或者在显示地形时该区域的渲染效果。</p>
</li>
<li><p>由于栅格是随机存取数据结构，因此可以快速访问存储在单元中的信息。</p>
</li>
<li><p>只需提高栅格分辨率，就能提高路径和导航规划的精度。</p>
</li>
</ul>
<p>为简单起见，假定地形中的障碍物是多边形的，我们现在列出一些可供选择的地形离散方法。</p>
<ul>
<li>Voronoi 图（Aurenhammer，1991 年）通过使路径偏离受阻多边形，将地形离散化。这样得到的路径可能比真正的最短路径要长得多。</li>
<li>Mitchell 和 Papadimitriou（1991 年）的离散化研究将地形划分为具有线性边缘和双曲线边缘的区域，这样就可以找到真正的最短路径，其时间和空间复杂度为 $O(m^{5&#x2F;3})$，其中 $m$ 是受阻多边形的角数。因此，路径规划的运行时间可随受阻多边形的角数呈超线性增长。</li>
<li>标准的四叉树（Yahja、Stentz、Singh 和 Brumitt，1998 年）会递归地将地形细分为四个大小相等的单元，直到所有单元都被完全遮挡、完全无遮挡或面积足够小为止。&#x3D;&#x3D;由此产生的路径可能会出现不必要的航向变化&#x3D;&#x3D;（即航向变化发生在自由空间而不是受阻多边形的角落）。</li>
<li>概率路线图（Kavraki、Svestka、Latombe 和 Overmars，1996 年）喝快速探索随机树（LaValle 和 Kuffner，2001 年）随机放置顶点（除了起点和目标顶点）。如果两个顶点有视线，则它们通过直线相连。顶点的随机放置需要仔细调整，因为它会影响路径规划的运行时间、找到路径的可能性以及路径的长度。</li>
<li>可见度图（Lee，1978 年；Lozano-P ́ erez &amp; Wesley，1979 年）使用每个受阻多边形的角作为顶点（除了起点和目标顶点）。如果两个顶点有视线，则它们通过直线相连，这样就能找到真正的最短路径。&#x3D;&#x3D;路径规划的运行时间会随着顶点数量的增加而呈超线性增长&#x3D;&#x3D;，因为边的数量会随着顶点数量的增加而呈二次曲线增长。</li>
</ul>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221359172.png" alt="img"></p>
<h3><span id="4existing-path-planning-algorithms">4.Existing Path-Planning Algorithms</span></h3><p>在本节中，我们将介绍一些现有的路径规划算法，它们都是 A* （Hart、Nilsson 和 Raphael，1968 年）的变体。A* 是机器人和视频游戏中常用的路径规划算法。算法 1 显示了 A* 的伪代码。第 13 行将被忽略。A* 为每个顶点 s 保留三个值：</p>
<ul>
<li><p>g 值 $g(s)$ 是目前发现的从起始顶点到顶点 $s$ 的最短路径长度，因此是顶点 $s$ 的起始距离的估计值。</p>
</li>
<li><p>用户提供的 $h$ 值 $h(s)$ 是顶点 $s$ 目标距离的估计值。$f$ 值 $f (s) &#x3D; g(s) + h(s)$ 是对从起始顶点经顶点 $s$ 到目标顶点的最短路径长度的估计。</p>
</li>
<li><p>在 A* 终止后，使用父级 $parent(s)$ 提取从起始顶点到目标顶点的路径.</p>
</li>
</ul>
<p>A* 还维护两个全局数据结构：</p>
<ul>
<li><p>open list是一个优先队列，包含 A* 考虑扩展的顶点。在伪代码中，$open.Insert(s, x)$ 将关键字为 $x$ 的顶点 $s$ 插入优先级队列 $open$ 中，$open.Remove(s)$ 从优先级队列 $open$ 中移除顶点 $s$，$open.Pop()$ 从优先级队列 $open$ 中移除关键字最小的顶点并返回。</p>
</li>
<li><p>close list是一个包含 A* 已经展开过的顶点的集合。它确保 A* 最多扩展每个顶点一次。</p>
</li>
</ul>
<p>A* 第一次遇到顶点时，会将每个顶点的 g 值设为无穷大，并将每个顶点的父顶点设为 NULL [第 17-18 行]。它将起始顶点的 g 值设置为零，并将起始顶点的父顶点设置为起始顶点本身 [第 2-3 行]。将打开列表和关闭列表设置为空列表，然后将起始顶点插入以 f 值为键的打开列表中 [4-6]。然后 A* 重复执行以下程序： 如果打开列表为空，则报告没有路径[第 20 行]。否则，它会找出开放列表中 f 值最小的顶点 s [第 8 行]。如果这个顶点是目标顶点，那么 A* 就会报告它找到了一条路径 [第 10 行]。路径提取[未在伪代码中显示]是沿着从目标顶点到起始顶点的父节点，反向检索从起始顶点到目标顶点的路径。否则，A* 会从打开列表 [第 8 行] 中删除顶点，并将该顶点插入到封闭列表 [第 11 行] 中，然后生成其每个未展开的可见相邻顶点，展开过程如下： A* 检查顶点 s 的 g 值加上顶点 s 到顶点 s′ 的直线长度是否小于顶点 s′ 的 g 值 [第 23 行]。如果是，则将顶点 s′ 的 g 值设为顶点 s 的 g 值加上从顶点 s 到顶点 s′ 的直线长度，将顶点 s′ 的父节点设为顶点 s，最后将顶点 s′ 插入以 f 值为键的开放列表，如果顶点 s′ 已在开放列表中，则将其键设为 f 值[第 24-28 行]。然后重复上述步骤。</p>
<p>概括地说，当 A* 在更新顶点（Update Vertex）过程中更新顶点 s 的未展开可见邻居 s′ 的 g 值和父节点时，会考虑从起始顶点到顶点 $s$ 的路径$[&#x3D;g(s)]$，以及从顶点 $s$ 到顶点 $s′$ 的直线路径$[&#x3D;c(s, s′)]$，结果长度为 $g(s) + c(s, s′)$ [第 23 行]。如果考虑的路径短于目前找到的从起始顶点到顶点 $s′$ 的最短路径 $[&#x3D; g(s′)]$，则 A* 更新顶点 $s′$ 的 $g$ 值和父节点。</p>
<p>现在，我们将介绍几种现有的路径规划算法，它们都是 A* 的版本，以及它们如何在运行时间和路径长度这两个相互冲突的标准之间进行权衡，如图 2 所示。我们按照路径长度递减的顺序介绍这些算法。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221414374.png" alt="image-20231122141357145"></p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221424076.png" alt="image-20231122142402568"></p>
<h4><span id="41-a-on-grids">4.1 A* on Grids</span></h4><p>我们可以在栅格上运行 A* ，即在由栅格顶点和边给出的图形上运行。得到的路径被人为地限制为由栅格的边构成，如图 1(a) 所示。因此，A* 在栅格上找到的路径并不等同于真正的最短路径，而且看起来很不现实，因为它们要么与真正的最短路径有很大偏差，要么有更多的航向变化，这就为平滑它们提供了动力。我们在实验中使用算法 5 计算出的八分位距作为 h 值。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221428085.png" alt="image-20231122142833613"></p>
<h4><span id="a-with-post-smoothed-paths-a-ps">A* with Post-Smoothed Paths (A* PS)</span></h4><p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221430744.png" alt="image-20231122143006516"></p>
<p>可以使用后平滑路径（A* PS）运行 A* （Thorpe，1984 年）。A* PS 在栅格上运行 A* ，然后在后处理步骤中平滑得到的路径，这通常会在增加运行时间的同时缩短路径。算法 2 显示了 A*  PS 在我们的实验中使用的简单平滑算法的伪代码（Botea, Muller, &amp; Schaeffer, 2004），该算法在运行时间和路径长度之间取得了良好的平衡。假设栅格上的 A* 找到路径 $[s_0, s_1, … , s_n]$，其中 $s_0 &#x3D; s_{start}$，$s_n &#x3D; s_{goal}$。A* PS 将路径上的第一个顶点作为当前顶点。然后，它会检查当前顶点 $s_0$ 是否与其路径上的后继顶点 $s_2$ 有视线连接。如果是，A* PS 会从路径上删除中间顶点 $s_1$，从而缩短路径。然后，A* PS 重复这一过程，再次检查当前顶点 $s_0$ 是否与其路径上的后继顶点 $s_3$ 有视线连接，以此类推。一旦当前顶点与其路径上的后继顶点的后继顶点不存在视线距离，A* PS 就会向前推进当前顶点并重复这一过程，直到到达路径的终点。我们在实验中使用直线距离 $h(s) &#x3D; c(s, sgoal)$ 作为 $h$ 值。</p>
<p>A* PS 在栅格上找到的路径通常比 A* 短，但不能保证找到真正的最短路径。图 3 显示了一个例子。假设 A* PS 找到的蓝色虚线路径是众多最短栅格路径之一。然后，它将这条路径平滑为蓝色实线路径，但这并不是一条真正的最短路径。红色虚线路径在受阻单元格 B2-B3-C3-C2 的上方（而非下方）移动，是一条真正的最短路径。A* PS 不能保证找到真正的最短路径，因为它在 A* 搜索过程中只考虑栅格路径，因此无法在 A* 搜索过程中对其他路径做出明智的决策，这也是交错搜索和平滑的动机。事实上，Theta* 除了交错搜索和平滑之外，与 A* PS 类似。</p>
<h4><span id="43-field-d-fd">4.3 Field D* (FD*)</span></h4><p>我们可以运行 Field D* (Ferguson &amp; Stentz, 2006) (FD* )。FD* 沿栅格边缘传播信息，而不限制栅格边缘的路径。FD* 设计使用 D* Lite（Koenig &amp; Likhachev，2002 年）进行快速重新规划（通过重复使用上一次 A* 搜索的信息来加速下一次搜索），并从目标顶点搜索到起始顶点。我们的 FD* 版本使用 A* ，并从起始顶点搜索到目标顶点，就像本文中的所有其他路径规划算法一样，这使得我们可以公平地比较它们，除了它们的重新规划能力。(Theta*  is currently in the process of being extended for fast replanning in Nash, Koenig, &amp; Likhachev, 2009.)</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221444737.png" alt="image-20231122144423888"></p>
<p>当 FD* 更新顶点 s 的未扩展可见邻居 $s′$ 的 $g$ 值和父节点时，会考虑从起始顶点到顶点 $s′$ 的周长$[&#x3D;g(X)]$ 上与顶点 $s′$ 有视线的任意点 X（不一定是顶点）的所有路径、 其中，周长由连接顶点 $s′$ 的所有相邻点以及从点 X 到顶点 $s′$ 的直线 $[&#x3D; c(X, s′)]$ 构成，长度为 $g(X) + c(X, s′)$ 。如果考虑的路径比目前发现的从起始顶点到顶点 s′ 的最短路径 $[&#x3D; g(s′)]$ 短，则 FD* 更新顶点 $s′ $ 的 $g$ 值和父节点。我们在实验中使用直线距离 $h(s) &#x3D; c(s, sgoal)$ 作为 $h$ 值。图 4 显示了一个例子。如粗体所示，顶点 $s′ &#x3D; B4$ 的周长由顶点 B4 的所有相邻点连接而成。考虑周长上的点 X。FD* 不知道点 X 的 $g$ 值，因为它只存储顶点的 $g$ 值。因此，它在 $g(B3) &#x3D; 2.41$ 和 $g(C3) &#x3D; 2.00$ 之间进行线性插值，得到 $g(X) &#x3D; 0.55 × 2.41 + 0.45 × 2.00 &#x3D; 2.23$，因为 0.55 和 0.45 分别是 X 点到顶点 B3 和 C3 的距离。尽管顶点 B3 和 C3 的 g 值都等于它们的真实起始距离，但计算出的点 X 的 $g$ 值与其真实起始距离 $[&#x3D; 2.55]$  不同。出现这种错误的原因很简单。从起始顶点经过顶点 C3 或顶点 B3 到目标顶点存在真正的最短路径。因此，根据线性插值假设，从起始顶点经过连接顶点 B3 和 C3 的边上的任意点到目标顶点也一定存在一条短路径。但事实并非如此，因为这些路径需要绕过阻塞单元 B2-B3-C3-C2，这使得它们比预期的要长。由于错误计算了 X 点的栅格值，FD* 将顶点 B4 的父节点设置为 X 点，导致路径在 X 点出现不必要的航向变化，甚至比最短栅格路径还长。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/FDstart.png" alt="FDstar算法"></p>
<p>FD* 的作者认识到，FD* 找到的路径经常会出现不必要的航向变化，因此建议在路径提取过程中使用一步前瞻算法（Ferguson &amp; Stentz, 2006），FD* 在我们的实验中使用了这种算法。&#x3D;&#x3D;这种一步前瞻算法允许 FD* 避免一些不必要的航向变化，如图 4 中的航向变化，但并不能消除所有航向变化&#x3D;&#x3D;。图 5 显示了红色的 FD* 路径和蓝色的相应真实最短路径。FD* 路径仍有许多不必要的航向变化。</p>
<h4><span id="44-a-on-visibility-graphs">4.4 A* on Visibility Graphs</span></h4><p>我们可以在可视图上运行 A* 。栅格的可见度图包含起始顶点、目标顶点和所有受阻单元的边角（Lozano-P ́ erez &amp; Wesley，1979）。我们在实验中使用直线距离 $h(s) &#x3D; c(s, sgoal)$ 作为 $h$ 值。如图 6(a)所示，可见度图上的 A* 可以找到真正的最短路径。真正的最短路径只有在受阻单元的拐角处才会有航向变化，而栅格上的 A* 、A*  PS 和 FD* 找到的路径可能会有不必要的航向变化。另一方面，可见度图上的 A* 可能比较慢。它沿着可见度图边传播信息，而可见度图边的数量会随着单元格数量的增加而呈二次增长，而栅格上的 A* 、A* PS 和 FD* 则沿着栅格边传播信息，而栅格边的数量只会随着单元格数量的增加而呈线性增长。如果在进行 A* 搜索之前构建可视图，则需要对每一对被遮挡单元的角进行视线检查，以确定它们之间是否应该有可见性图边，这对于图 6(b) 中的房间来说至少需要 2,556 次视线检查（Tozour，2004 年）。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/ThetaStarVisibilityGraphs.png" alt="可见图"></p>
<p>通过在 A* 搜索过程中构建可见性图，可以减少 A* 对可见性图进行视线检查的次数。当它扩展一个顶点时，会在扩展顶点和所有受阻单元的角落（以及目标顶点）之间执行视线检查。虽然这在某些环境下（如简单的室外地形）可以大大减少视线检查的次数，但在其他环境下（如杂乱的室内地形）却无法做到这一点。更复杂的优化方法（如减少可见度图）可以进一步减少视线检查的次数，但并不能充分提高可见度图上的 A* 速度（Liu 和 Arimoto，1992 年）。</p>
<h3><span id="basic-theta">Basic Theta*</span></h3><p>在本节中，我们将介绍 Theta* （Nash 等人，2007 年），它是我们的任意角度路径规划 A* 版本，可沿着栅格边缘传播信息，而不会将路径限制在栅格边缘。它结合了可视图上的 A* （航向变化仅发生在受阻单元的角落）和栅格上的 A* （边的数量仅随单元数量线性增长）。如图 2 所示，它的路径只比真正的最短路径（如 A* 在可视图上找到的路径）稍长，却只比 A* 在栅格上的路径稍慢。Theta* 和 A* 在栅格上的主要区别在于，使用 Theta* 时，顶点的父节点可以是任何顶点，而使用 A* 时，顶点的父节点必须是该顶点的邻居。我们首先介绍基本 Theta* ，它是 Theta* 的一个简单版本</p>
<p>算法 3 显示了基本 Theta* 的伪代码。程序 Main 与算法 1 中的 A* 相同，因此没有显示。第 13 行忽略不计。我们在实验中使用直线距离 $h(s) &#x3D; c(s, sgoal)$ 作为 $h$ 值。</p>
<h4><span id="operation-of-basic-theta">Operation of Basic Theta*</span></h4><p>基本 Theta* 非常简单。它与 A* 相同，只是在更新顶点 $s$ 的未展开可见邻居 $s′$ 的 $g$ 值和父级时，会考虑两条路径，而不是 A* 所考虑的一条路径。图 7(a) 显示了一个示例。基本 Theta* 正在扩展具有父节点 A4 的顶点 B3，并需要更新未扩展的可见邻居 C3 的 $g$ 值和父节点。基本 Theta* 考虑了两条路径：</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/ThetaStar.png" alt="image-20231122170742258"></p>
<ul>
<li><strong>路径 1：</strong> 基本 Theta* 考虑的路径是从起始顶点到顶点 $s [&#x3D; g(s)]$ 以及从顶点 $s$ 到顶点 $s′$ 的直线 $[&#x3D; c(s, s′)]$，结果长度为 $g(s) + c(s, s′)$ [第 52 行]。路径 1 是 A* 考虑的路径。它与图 7(a) 中红色虚线路径 [A4, B3, C3] 相对应。）</li>
<li><strong>路径 2：</strong> 基本 Theta* 还考虑了从起始顶点到顶点 $s$ 的父顶点的路径 $[&#x3D; g(parent(s))]$ 以及从顶点 $s$ 的父顶点到顶点 $s′$ 的直线路径 $[&#x3D; c(parent(s), s′)]$，结果长度为 $g(parent(s)) + c(parent(s), s′)$ [第 44 行]。路径 2 不在 A* 的考虑范围之内，它允许 Basic Theta* 构建任意角度的路径。它与图 7(a) 中的蓝色实线路径 [A4, C3] 相对应。</li>
</ul>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/ThetaStarCode.png" alt="image-20231122181608741"></p>
<p>由于三角形不等式，路径 2 不比路径 1 长。三角形不等式指出，三角形任意一边的长度都不长于其他两边长度之和。由于路径 1 由起始顶点到顶点 $s$ 的父顶点的路径、顶点 $s$ 的父顶点到顶点 $s$ 的直线（直线 A）和顶点 $s$ 到顶点 $s′$ 的直线（直线 B）组成，路径 2 由起始顶点到顶点 $s$ 的父顶点的相同路径和顶点 $s$ 的父顶点到顶点 $s′$ 的直线（直线 C）组成，且直线 A、B 和 C 构成一个三角形，因此三角形不等式在这里适用。路径 1 可以保证畅通无阻，但路径 2 却不能。因此，如果顶点 $s′$ 与顶点 $s$ 的父节点有视线相交，且路径 2 没有阻塞，则基本 Theta* 会选择路径 2 而不是路径 1。图 7(a) 显示了一个例子。图 7(b) 是一个示例。如果选择的路径短于目前发现的从起始顶点到顶点 $s′$ 的最短路径 $[&#x3D; g(s′)]$，基本 Theta* 会更新顶点 $s′$ 的 $g$ 值和父节点。我们在实验中使用直线距离 $h(s) &#x3D; c(s, sgoal)$ 作为 h 值。</p>
<h4><span id="52-example-trace-of-basic-theta">5.2 Example Trace of Basic Theta*</span></h4><p>图 8 显示了基本 Theta* 的示例轨迹。顶点标有其 $g$ 值和父代。箭头指向其父节点。红色圆圈表示正在展开的顶点，蓝色箭头表示在当前展开过程中生成的顶点。首先，Basic Theta* 以父顶点 A4 展开起始顶点 A4，如图 8(a) 所示。它将顶点 A4 的未扩展可见相邻顶点的父顶点设置为顶点 A4，就像 A* 所做的那样。其次，基本 Theta* 将顶点 B3 与父节点 A4 展开，如图 8(b) 所示。顶点 B2 是顶点 B3 的未扩展可见邻居，与顶点 A4 没有视线关系。因此，基本 Theta* 根据路径 1 对其进行更新，并将其父节点设置为顶点 B3。另一方面，顶点 C2、C3 和 C4 是顶点 B3 的未展开可见邻居，与顶点 A4 有视线相交。因此，基本 Theta* 将根据路径 2 更新它们，并将它们的父节点设置为顶点 A4。(顶点 B3 的其他未扩展可见邻域的 g 值和父级不会更新）。第三，基本 Theta* 将顶点 B2 与父顶点 B3 展开，如图 8(c) 所示。顶点 A1 和 A2 是顶点 B2 的未扩展可见相邻顶点，与顶点 B3 没有视线关系。因此，基本 Theta* 根据路径 1 对其进行更新，并将其父节点设置为顶点 B2。另一方面，顶点 B1 和 C1 是顶点 B2 的未展开可见相邻顶点，与顶点 B3 有视线连接。因此，基本 Theta* 会根据路径 2 更新这两个顶点，并将它们的父顶点设置为顶点 B3。第四，如图 8(d)所示，Basic Theta* 将目标顶点 C1 与父顶点 B3 展开并终止。然后，路径提取会沿着目标顶点 C1 到起始顶点 A4 的父节点，反向检索出从起始顶点到目标顶点的真正最短路径 [A4, B3, C1]。</p>
<h4><span id="53-properties-of-basic-theta">5.3 Properties of Basic Theta*</span></h4><p>现在我们讨论基本 Theta* 的特性。</p>
<h5><span id="531-correctness-and-completeness">5.3.1 CORRECTNESS AND COMPLETENESS</span></h5><p>基本 Theta* 是正确的（即只找到从起始顶点到目标顶点的无阻塞路径）和完整的（即找到一条从起始顶点到目标顶点的路径（如果存在的话））。我们在证明中使用了下面的定理。</p>
<p><strong>定理 1.</strong> 如果两个顶点之间存在一条畅通无阻的路径，那么同样的两个顶点之间也存在一条畅通无阻的栅格路径。</p>
<p><strong>证明</strong> 如果两个顶点之间存在一条畅通无阻的任意角路径 $[s_0, … , s_n]$，那么这两个顶点之间就存在一条畅通无阻的任意角路径。考虑这条任意角度路径的任意路径段 $s_k,s_{k+1}$。如果路径段是水平或垂直的，则考虑与路径段重合的从顶点 $s_k$ 到顶点 $s_{k+1}$ 的无阻塞栅格路径。否则，考虑该路径段经过的无阻塞单元的序列 $(b_0, … , b_m)$。任何两个连续的单元格 $b_j$ 和 $b_{j+1}$ 至少共享一个顶点 $s′_{j+1}$，因为这两个单元格要么共享一条边，要么对角相邻。(考虑栅格路径 $[s′_{0} &#x3D; s_{k}, s′_{1}, … , s′_{m}, s′_{m+1} &#x3D; s_{k+1}]$。这条从顶点 $s_{k}$ 到顶点 $s_{k+1}$ 的栅格路径是无阻塞的，因为上面任意两个连续的顶点都是同一个无阻塞单元的角，因此是可见的邻居。对任意角度路径的每个路径段重复此步骤，并将得到的栅格路径串联成一条从顶点 $s_0$ 到顶点 $s_n$ 的无阻塞栅格路径（如果栅格路径上的几个连续顶点相同，则可以删除除一个顶点以外的所有顶点）。</p>
<p><strong>定理 2.</strong> 在基本 Theta* 执行过程中的任何时刻，从开放或封闭列表中的任何顶点到起始顶点的父节点，都能检索到一条从起始顶点到该顶点的反向无阻塞路径。</p>
<p><strong>证明</strong> 我们通过归纳法证明该定理成立，并且在开放列表或封闭列表的结合部中的任何顶点的父顶点本身也在开放列表或封闭列表的结合部中。这句话最初成立的原因是，起始顶点是开放列表或封闭列表联合体中的唯一顶点，而且它是自己的父顶点。我们现在证明，只要顶点改变了它的父顶点或它在开放列表或封闭列表的联合体中的成员身份，该声明就会继续成立。顶点一旦成为开放或封闭列表联盟的成员，它就会一直是联盟的成员。只有当基本 Theta* 扩展了某个顶点 $s$，并在更新顶点（UpdateVertex）过程中更新了顶点 $s$ 的未扩展可见邻居 $s′$ 的 $g$ 值和父级时，顶点才能成为开放或封闭列表联盟中的成员。因此，顶点 $s$ 位于封闭列表中，根据归纳假设，其父节点位于开放列表或封闭列表的结合部。因此，根据归纳假设，沿着顶点 $s$（或其父节点）到起始顶点的父节点，可以反向检索出一条从起始顶点到顶点 $s$（或其父节点）的无阻塞路径。如果基本 Theta* 根据路径 1 更新顶点 $s′$，那么语句继续成立，因为顶点 $s$ 和 $s′$ 是可见的相邻顶点，因此从顶点 $s$ 到顶点 $s′$ 的路径段是畅通的。如果基本 Theta* 根据路径 2 更新顶点 $s′$，那么语句继续成立，因为基本 Theta* 明确检查了从顶点 $s$ 的父节点到顶点 $s′$ 的路径段是否畅通无阻。顶点的父节点没有其他变化方式。</p>
<p><strong>定理 1.​</strong> 如果存在从起始顶点到目标顶点的无阻塞路径，则基本 Theta* 会终止，路径提取会检索到该路径。否则，基本 Theta* 将终止并报告不存在无阻塞路径。</p>
<p><strong>证明</strong> 下列性质共同证明了本定理。它们的证明利用了这样一个事实，即如果open list的顶点为空或扩展了目标顶点，基本 Theta* 就会终止。起始顶点最初位于 open list 中。任何其他顶点最初既不在 open list 中，也不在 close list 中。既不在打开列表中也不在关闭列表中的顶点可以插入到open list中。open list中的顶点可以从open list中移除，并插入到close list中。close list中的顶点会一直保留在封闭列表中。</p>
<p><strong>性质 1：</strong> 基本 Theta* 终止。每次迭代都会在 open list 中扩展一个顶点。在此过程中，它会将顶点从 open list 中移除，然后再也无法将其插入 open list 中。由于顶点的数量是有限的，open list 最终会变空，如果基本Theta* 没有提前终止，就必须终止。</p>
<p><strong>性质 2：</strong> 如果基本 Theta* 因其 open list 为空而终止，则不存在从起始顶点到目标顶点的无阻塞路径。我们证明反证。假设存在一条从起始顶点到目标顶点的畅通无阻的路径。我们通过矛盾证明，Basic Theta* 不会终止，因为它的 open list 是空的。因此，也假设 Basic Theta* 终止是因为其 open list 为空。那么，根据定理 1，存在一条从起始顶点到目标顶点的无阻塞栅格路径 $[s_0 &#x3D; s_{start}, … , s_n &#x3D; s_{goal}]$。选择顶点 si 作为栅格路径上的第一个顶点，当 Basic Theta* 终止时，该顶点不在 close list 中。基本 Theta* 终止时，目标顶点不在封闭列表中，因为基本 Theta* 在扩展目标顶点时会终止。因此，顶点 $s_i$ 存在。顶点 $s_i$ 不是起始顶点，因为起始顶点本应在打开列表中，而 Basic Theta* 不可能终止，因为它的打开列表是空的。因此，顶点 $s_i$ 在栅格路径上有一个前置顶点。由于顶点 $s_i$ 是栅格路径上的第一个顶点，在 Basic Theta* 终止时不在封闭列表中，因此当 Basic Theta* 终止时，这个前置顶点在封闭列表中。当 Basic Theta* 扩展前置顶点时，会将顶点 $s_i$ 添加到开放列表中。因此，当 Basic Theta* 终止时，顶点 $s_i$ 仍在打开列表中。但是，Basic Theta* 不可能终止，因为它的打开列表是空的，这是一个矛盾。</p>
<p><strong>性质 3:</strong> 如果基本 Theta* 因为扩展了目标顶点而终止，那么路径提取会检索出一条从起始顶点到目标顶点的畅通无阻的路径，因为根据引理 2，沿着从目标顶点到起始顶点的父节点，可以反向检索出一条从起始顶点到目标顶点的畅通无阻的路径。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311221851376.png" alt="image-20231122185115820"></p>
<h4><span id="532-optimality">5.3.2 OPTIMALITY</span></h4><p>基本 Theta* 并不是最优的（&#x3D;&#x3D;也就是说，它不能保证找到真正的最短路径&#x3D;&#x3D;），因为顶点的父节点必须是该顶点的可见邻居或可见邻居的父节点，而真正的最短路径并非总是如此。图 9(a) 显示了这样一个例子：红色虚线路径 [E1, B9] 是一条从起始顶点 E1 到顶点 B9 的真正最短路径，因为顶点 E1 与顶点 B9 是视线相交。但是，顶点 E1 既不是顶点 B9 的可见邻居，也不是其可见邻居的父顶点，因为顶点 E1 与这些顶点（红色突出显示）之间没有视线。因此，Basic Theta* 无法将顶点 B9 的父顶点设置为顶点 E1，也无法找到从顶点 E1 到顶点 B9 的真正最短路径。</p>
<p>同样，图 9(b) 显示了一个示例，红色虚线路径 [E1, D8, C10] 是一条从顶点 E1 到顶点 C10 的真正最短路径。然而，顶点 D8 既不是顶点 C10 的可见邻居，也不是其可见邻居的父节点，因为起始顶点 E1 要么有视线通向它们，要么 Basic Theta* 找到了从顶点 E1 到它们的不包含顶点 D8 的路径。事实上，从顶点 E1 到顶点 C10 的所有可见相邻顶点的真正最短路径，顶点 E1 没有视线移动到受阻单元格 C7C8-D8-D7 的上方（而不是下方）。因此，Basic Theta* 无法将顶点 C10 的父节点设置为顶点 D8，也就无法找到从顶点 E1 到顶点 C10 的真正最短路径。图 9(a) 中从顶点 E1 到顶点 B9 的蓝色实线路径和图 9(b) 中从顶点 E1 到顶点 C10 的蓝色实线路径比真正的最短路径长不到 1.002 倍。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241830465ThetaStar.png" alt="image-20231124182957392"></p>
<h4><span id="533-heading-changes">5.3.3 HEADING CHANGES</span></h4><p>Basic Theta* 利用了真正的最短路径只在受阻单元格的角上有方向变化这一事实。然而，Basic Theta* 找到的路径偶尔会出现不必要的方向变化。图 10 显示了一个示例，Basic Theta* 找到了从顶点 A1 到顶点 D6 的蓝色实线路径 [A1，D5，D6]。出现这种错误的原因很简单。假设 open list 同时包含顶点 C5 和 D5。顶点 C5 的 f 值为 $f (C5) &#x3D; g(C5) + h(C5) &#x3D; 4.61 + 1.41 &#x3D; 6.02$，其父顶点为顶点 C4。顶点 D5 的 $f$ 值为 $f (D5) &#x3D; 5.00 + 1.00 &#x3D; 6.00$，其父顶点为顶点 A1。因此，Basic Theta* 先于顶点 C5 展开顶点 D5（因为其 $f$ 值更小）。当基本 Theta* 以父顶点 A1 展开顶点 D5 时，会生成顶点 D6。顶点 D6 是顶点 D5 的未展开可见邻居，与顶点 A1 没有视线关系。因此，基本 Theta* 根据路径 1 对其进行更新，将其 f 值设置为 $f (D6) &#x3D; 6.00 + 0.00 &#x3D; 6.00$，将其父节点设置为顶点 D5，并将其插入到 open list 中。因此，基本 Theta* 会在顶点 C5 之前扩展目标顶点 D6（因为其 f 值更小）并终止。然后，路径提取会从目标顶点 D6 开始，沿着父级顶点 A1 提取出蓝色实线路径 [A1、D5、D6]。因此，Basic Theta* 从未扩展顶点 C5，这将导致它根据路径 2 将顶点 D6 的父节点设置为顶点 C4，而路径提取将检索到红色虚线路径 [A1、C4、D6]，这才是真正的最短路径。图 10 中从顶点 A1 到顶点 D6 的蓝色实线路径比真正的最短路径长不到 1.027 倍。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241842095.png" alt="image-20231124184255179"></p>
<h3><span id="6-angle-propagation-theta-ap-theta">6. Angle-Propagation Theta* (AP Theta*)</span></h3><p>&#x3D;&#x3D;由于每次视线检查的运行时间与单元格数呈线性关系，因此每次顶点扩展（即在扩展顶点时生成未扩展的可见邻域所消耗的运行时间）的基本 Theta* 运行时间与单元格数呈线性关系。&#x3D;&#x3D;在本节中，我们将介绍角度传播 Theta* (AP Theta* )，它将基本 Theta* 每个顶点扩展的运行时间从线性减少为常数1。AP Theta* 与 Basic Theta* 的主要区别在于，AP Theta* 传播角度范围，并利用它们来确定两个顶点是否有视线。</p>
<p>如果顶点处有光源，而光线无法穿过被遮挡的单元格，那么阴影中的单元格与顶点没有视线接触，而所有其他单元格与顶点有视线接触。每个与顶点有视线的点的连续区域都可以用两条从顶点发出的光线来描述，因此也可以用两个角度边界定义的角度范围来描述。图 11 显示了一个示例，由两个角度边界 $\theta_1$ 和 $theta_2$ 定义的红色角度范围内的所有点都与顶点 $s$ 有视线接触。 AP Theta* 在扩展顶点时计算顶点的角度范围，然后沿栅格边缘传播，因此每次顶点扩展的运行时间是恒定的，因为角度范围可以在恒定时间内传播，视线检查也可以在恒定时间内执行。</p>
<p>算法 4 显示了 AP Theta* 的伪代码。程序 Main 与算法 1 中的 A* 相同，因此没有显示。第 13 行将被执行。在实验中，我们使用直线距离 $h(s) &#x3D; c(s, sgoal)$ 作为 $h$ 值。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241853448.png" alt="image-20231124185311154"></p>
<h4><span id="61-definition-of-angle-ranges">6.1 Definition of Angle Ranges</span></h4><p>现在我们讨论角度范围这一关键概念。AP Theta* 为每个顶点 s 保留两个附加值，即顶点 s 的下角边界 $lb(s)$ 和顶点 s 的上角边界 $ub(s)$，它们共同构成顶点 s 的角度范围 $[lb(s), ub(s)]$。角度边界对应于从顶点 s 的父顶点出发的射线的方向（以度为单位），从顶点 s 的父顶点到顶点 s 的射线方向为零度。如果（但不一定只有）从顶点 $s$ 的父顶点到顶点 $s$ 的可见邻居的射线的方向包含在顶点 $s$ 的角度范围内，则保证顶点 s 的可见邻居与顶点 $s$ 的父顶点有视线相交。图 12 显示了这样一个例子：&#x3D;&#x3D;顶点 C3 的父顶点 A4 的角度范围为 $[-18, 27]$&#x3D;&#x3D;。因此，红色区域中顶点 C3 的所有可见邻居都保证与顶点 C3 的父顶点有视线接触。例如，顶点 C4 保证与顶点 C3 的父顶点有视线接触，但顶点 B2 却没有。因此 AP Theta* 假设顶点 B2 与顶点 C3 的父节点不存在视线关系。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241929579.png" alt="image-20231124192944260"></p>
<p>现在我们更正式地定义角度范围的概念。$\Theta(s, p, s′) ∈ [-90, 90]$ 是顶点 p 到顶点 s 的射线与顶点 p 到顶点 $s′$ 的射线之间的夹角（以度为单位），AP Theta* 也因此而得名。如果从顶点 p 到顶点 $s$ 的射线与从顶点 p 到顶点 $s′$ 的射线顺时针方向相反，则角度为正；如果从顶点 p 到顶点 $s$ 的射线与从顶点 p 到顶点 $s′$ 的射线方向相同，则角度为零；如果从顶点 p 到顶点 $s$ 的射线与从顶点 p 到顶点 $s′$ 的射线逆时针方向相反，则角度为负。图 12 显示了一个 $\Theta(C3, A4, C4) &#x3D; 27$ 和 $\Theta(C3, A4, B3) &#x3D; -18$ 的例子。如果（但不一定只有）$lb(s) ≤ \Theta(s, parent(s), s′) ≤ ub(s)$，则保证顶点 $s$ 的可见邻居 $s′$ 与顶点 $s$ 的父顶点有视线接触（可见性属性）。</p>
<h4><span id="62-update-of-angle-ranges">6.2 Update of Angle Ranges</span></h4><p>现在我们讨论 AP Theta* 在扩展顶点时如何计算顶点的角度范围。由于顶点展开的顺序取决于多种因素，例如 $h$ 值，因此 AP Theta* 无法保证拥有足够的信息来精确确定角度范围，这使得计算变得复杂。在这种情况下，AP Theta* 可以对角度范围进行超出必要的限制，以保证可见性属性成立，并找到未阻塞的路径。</p>
<p>AP Theta* 扩展顶点 $s$ 时，最初会将顶点 $s$ 的角度范围设置为 $[-\infty, \infty]$，这意味着该顶点的所有可见邻居都能保证与该顶点的父顶点有视线接触。然后，如果顶点 s 不是起始顶点，角度范围的限制会越来越大。</p>
<p>AP Theta* 根据与顶点 $s$ 相邻的每个受阻单元 $b$（即顶点 $s$ 是 $b$ 的一个角，写成 $s∈ corners(b)$）来限制顶点 $s$ 的角度范围，前提是至少满足两个条件中的一个：</p>
<ul>
<li><p>情况 1：如果受阻单元 b 的每个角 $s′$ 至少满足以下条件之一：</p>
<ul>
<li>$parent(s)&#x3D; s′$ 或</li>
<li>$\Theta(s,parent(s), s’) &lt; 0$ 或</li>
<li>$\Theta(s,parent(s), s’)&#x3D;0$ 且 $c(parent(s), s′) ≤ c(parent(s), s),$</li>
</ul>
<p>那么 AP Theta* 假设，如果从顶点 $s$ 的父顶点到顶点 $s$ 的射线与从顶点 $s$ 的父顶点到顶点 $s′′$ 的射线逆时针方向，即如果 $\Theta（s, parent(s), s′′）&lt; 0$，则顶点 $s′′$ 没有视线到顶点 $s$ 的父顶点。因此 AP Theta* 将顶点 s 的下角边界设为 $\Theta(s, parent(s), s) &#x3D; 0$ [第 83 行]。</p>
</li>
<li><p>情况 2：如果受阻单元 b 的每个角 $s′$ 至少满足以下条件之一：</p>
<ul>
<li>$parent(s) &#x3D; s′$ 或</li>
<li>$\Theta(s, parent(s), s′) &gt; 0$ 或</li>
<li>$\Theta(s, parent(s), s′) &#x3D; 0$ 且 $c(parent(s), s′) ≤ c(parent(s), s)$</li>
</ul>
<p>则 AP Theta* 假设，如果从顶点 s 的父顶点到顶点 $s$ 的射线与从顶点 $s$ 的父顶点到顶点 $s′′$ 的射线顺时针方向，即如果 $\Theta(s, parent(s), s′′)&gt; 0$，则顶点 s′′ 没有视线到顶点 s 的父顶点。因此 AP Theta* 将顶点 s 的角度上限设为 $\Theta (s, parent(s), s) &#x3D; 0$ [第 86 行]。</p>
</li>
</ul>
<p>AP Theta* 还会根据顶点 $s$ 的每个可见邻居 $s′$ 来限制顶点 $s$ 的角度范围，前提是满足两个条件中的至少一个：</p>
<ul>
<li><p>情况 3：如果顶点 $s′$ 满足以下所有条件：</p>
<ul>
<li>$s′ ∈ closed$ 且</li>
<li>$parent(s) &#x3D; parent(s′)$ 且</li>
<li>$s′ \not&#x3D; sstart$,</li>
</ul>
<p>则 AP Theta* 通过与顶点 $s′$ 的角度范围相交来限制顶点 $s$ 的角度范围 [第 90 和 92 行]。为此，它首先将顶点 $s′$ 的角度范围移动 $\Theta (s, parent(s), s′)$度，以考虑顶点 $s′$ 的角度范围已校准为从顶点 $s$ 和 $s′$ 的共同父顶点到顶点 $s′$ 的射线方向为零度、 同时校准顶点 $s$ 的角度范围，使顶点 $s$ 和 $s′$ 的父顶点到顶点 $s$ 的射线方向为零度。第 89 和 91 行分别确保角度下限值始终为非正值和角度上限值始终为非负值。角度下限值应为非正值（角度上限值应为非负值）这一事实很直观，因为如果顶点 $s$ 被指定为父顶点 p，那么从顶点 p 到顶点 s 的射线角度应包含在顶点 s 的角度范围内。</p>
</li>
<li><p>情况 4：如果顶点 s′ 满足以下所有条件：</p>
<ul>
<li>$c(parent(s), s′) &lt; c(parent(s), s)$ 且</li>
<li>$parent(s) \not&#x3D; s′$ 且</li>
<li>$s′ \not∈ closed$ 或 $parent(s) \not&#x3D; parent(s′),$</li>
</ul>
<p>那么 AP Theta* 没有足够的顶点 $s′$ 的信息。因此，AP Theta* 无法准确确定顶点 $s$ 的角度范围，只能做一个保守的假设，即顶点 $s′$ 几乎看不到顶点 $s$ 的父点 [第 95 和 97 行]。</p>
</li>
</ul>
<p>AP Theta* 在更新边界（UpdateBounds）过程中更新了顶点 $s$ 的角度范围后，可见性属性保持不变。因此，当 AP Theta* 检查顶点 $s$ 的可见邻居 $s′$ 是否与顶点 $s$ 的父节点有视线时，它现在会检查 $lb(s) ≤ \Theta(s, parent(s), s′) ≤ ub(s)$ [第 60 行] 是否为真，而不是 $LineOfSight(parent(s), s′)$ [第 42 行] 是否为真。这就是 AP Theta* 和 Basic Theta* 之间的唯一区别。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241942253.png" alt="image-20231124194241141"></p>
<p>图 13(a) 显示了 AP Theta* 计算顶点 A4 的角度范围的示例。它将角度范围设置为 $[-\infty, \infty]$。图 13(b) 是 AP Theta* 计算顶点 B3 的角度范围的示例。它将角度范围初始设置为 $[-\infty，\infty]$。然后根据 A2-A3-B3-B2 单元 [第 83 行]，按照情况 1 将角度下限设置为 0 度。根据情况 4，它将顶点 B4 的角度上限设置为 45 度，因为顶点 B4 尚未展开，因此不在 close list 中 [第 97 行]。图 13(c) 显示了 AP Theta* 计算顶点 B2 的角度范围的示例。它将角度范围初始设置为 $[-\infty，\infty]$。然后根据 A2-A3-B3-B2 单元[第 83 行]的阻塞情况，按照情况 1 将角度下限设为 0 度。假设顶点 C1 不是目标顶点。图 13(d) 显示了 AP Theta* 计算顶点 C1 的角度范围的示例。它最初将角度范围设置为 $[-\infty, \infty]$。然后，它根据情况 3，以顶点 B2 为基础，将角度下限设为 -27 度[第 90 行]，并根据情况 4，以顶点 C2 为基础，将角度上限设为 18 度，而顶点 C2 是未展开的，因此不在 close list 中[第 97 行]。</p>
<h3><span id="63-example-trace-of-ap-theta">6.3 Example Trace of AP Theta*</span></h3><p>图 13 是利用图 8 中的路径规划问题绘制的 AP Theta* 曲线示例。顶点的标签现在包括了角度范围。</p>
<h3><span id="64-properties-of-ap-theta">6.4 Properties of AP Theta*</span></h3><p>现在我们来讨论 AP Theta* 的特性。AP Theta* 的运行方式与基本 Theta* 相同，因此具有与基本 Theta* 相似的特性。&#x3D;&#x3D;例如，AP Theta* 是正确和完整的。它不能保证找到真正的最短路径，而且其路径偶尔会出现不必要的航向变化。&#x3D;&#x3D;</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241948366.png" alt="image-20231124194838062"></p>
<p>AP Theta* 有时会对角度范围进行超出必要的限制，以保证找到无遮挡的路径，这意味着它的视线检查有时会错误地失败，在这种情况下，它必须根据路径 1 而不是路径 2 更新顶点。AP Theta* 仍然是完整的，因为如果所有视线检查都失败，它也能找到一条无遮挡的栅格路径；如果存在一条无遮挡的任意角度路径，它也总是存在一条无遮挡的栅格路径。不过，AP Theta* 找到的路径可能比 Basic Theta* 找到的路径更长。图 14 显示了一个示例。当 AP Theta* 用父 B1 展开顶点 C4 并计算顶点 C4 的角度范围时，顶点 C3 未展开，因此不在 close list 中。这意味着 AP Theta* 没有关于顶点 C3 的足够信息，例如，它不知道单元格 C2-C3-D3-D2 是否未封锁。因此，AP Theta* 无法准确确定顶点 C4 的角度范围，只能做出顶点 C3 与顶点 B1 几乎没有视线的保守假设，并根据顶点 C3 按照情况 4 设置顶点 C4 的角度下限。然后，它使用得到的角度范围确定顶点 C4 的未扩展可见邻居 D4 不能保证与顶点 B1 有视线接触。但是，如果单元格 C2-C3-D3-D2 未被遮挡，顶点 D4 确实与顶点 B1 有视线连接。AP Theta* 最终找到了从起始顶点 B1 到顶点 D4 的蓝色实线路径 [B1，C3，D4]，而 Basic Theta* 找到了红色虚线路径 [B1，D4]，这是真正的最短路径。</p>
<p>由于 AP Theta* 执行视线检查的方式不同，Basic Theta* 的正确性和完整性证明需要针对 AP Theta* 稍作修改。</p>
<p><strong>定理 2.</strong> AP Theta* 终止后，如果存在从起始顶点到目标顶点的无阻塞路径，路径提取将检索到该路径。否则，AP Theta* 终止并报告不存在无阻塞路径。</p>
<p>证明 证明与定理 1 的证明类似，因为 AP Theta* 只使用角度范围来确定路径 2 是否受阻，而不是确定路径 1 是否受阻。唯一需要证明的不同属性是，如果（但不一定只有当）AP Theta* 的视线检查成功，两个顶点确实有视线，见附录 B。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241954789.png" alt="image-20231124195450791"></p>
<h3><span id="7-experimental-results">7. Experimental Results</span></h3><p>在本节中，我们将基本 Theta* 和 AP Theta* 与栅格上的 A* 和可视图上的 A*  、 A* PS、FD*  进行比较，比较它们的路径长度、顶点扩展次数、运行时间（以秒为单位）和航向变化次数。</p>
<p>我们在 100 × 100 和 500 × 500 的栅格上对这些路径规划算法进行了比较，这些栅格包含不同比例的随机阻塞单元（随机栅格）和来自即时战略游戏《博德之门 II》的缩放地图（游戏地图）。图 15（Bulitko、Sturtevant 和 Kazakevich，2005 年）显示了游戏地图的一个示例。起始顶点和目标顶点是单元格的西南角。对于随机栅格，起始顶点位于西南方的单元格中。目标顶点位于从最东边的单元格列中随机选择的单元格中。单元是随机阻塞的，但未阻塞单元的一单元边界保证了从起点顶点到目标顶点的路径。对于游戏地图，起始顶点和目标顶点是从未被阻塞的单元格的角上随机选择的。我们对 500 个随机 100 × 100 栅格、500 个随机 500 × 500 栅格和 118 个游戏地图进行了平均计算。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311241959104.png" alt="image-20231124195944993"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-14T10:15:53.000Z" title="2023/11/14 18:15:53">2023-11-14</time>发表</span><span class="level-item"><time dateTime="2023-11-16T05:15:18.184Z" title="2023/11/16 13:15:18">2023-11-16</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%8E%9F%E5%88%9B/">原创</a></span><span class="level-item">24 分钟读完 (大约3626个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/14/XTDrone%E4%BB%BF%E7%9C%9F%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/">XTDrone仿真平台配置</a></p><div class="content"><h1><span id="xtdrone仿真平台配置">XTDrone仿真平台配置</span></h1><p>环境：</p>
<p>VMWare 16.0</p>
<p><del>Ubuntu 22.04</del> （因为没人配过）Ubuntu 20.04</p>
<p>参考文章：</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.yuque.com/xtdrone/manual_cn/basic_config">仿真平台基础配置 (yuque.com)</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45291614/article/details/133657158">Ubuntu20.04搭建PX4仿真环境及XTDrone开发平台（最详细最明白）_ubuntu安装px4_哒哒哒，啥也不会的博客-CSDN博客</a></p>
</li>
</ul>
<p>安装过程：</p>
<p>简单地说，XTDrone安装包括几个部分：ROS安装、Gazebo安装、marvos安装和PX4 安装，XTDrone下载和配置。</p>
<h3><span id="依赖安装">依赖安装</span></h3><p>首先安装一个<strong>aptitude</strong>&#x3D;&#x3D;以解决出现的依赖问题&#x3D;&#x3D;</p>
<p><em>依赖问题的报错形式：</em></p>
<p><em>有一些软件包无法被安装。如果您用的是 unstable 发行版，这也许是<br>因为系统无法达到您要求的状态造成的。该版本中可能会有一些您需要的软件<br>包尚未被创建或是它们已被从新到(Incoming)目录移出。<br>下列信息可能会对解决问题有所帮助：<br>下列软件包有未满足的依赖关系：<br>fcitx : 依赖: fcitx-data 但是它将不会被安装<br>E: 无法修正错误，因为您要求某些软件包保持现状，就是它们破坏了软件包间的依赖关系。</em></p>
<p>使用<code>sudo apt install aptitude </code>安装aptitude，在一定程度上能解决依赖问题</p>
<p>先从语雀下载压缩包<a target="_blank" rel="noopener" href="https://lark-assets-prod-aliyun.oss-cn-hangzhou.aliyuncs.com/yuque/0/2022/zip/985678/1672148620266-ad2f680e-e9ec-4be0-9746-914552829832.zip?OSSAccessKeyId=LTAI4GGhPJmQ4HWCmhDAn4F5&Expires=1700030561&Signature=jN8jkNF9y0J5GD+A6wGAnGnwSgU=&response-content-disposition=attachment;filename*=UTF-8%27%27PX4_Firmware.zip">PX4_Firmware</a>，并将该zip压缩包放置到Ubuntu主目录下，使用unzip命令解压，没用unzip命令工具，使用<code>sudo apt install unzip</code>或<code>sudo pip install unzip</code>，然后解压后，将其命名为PX4_Firmware，使用<code>cd PX4_Firmware/Tools/setup</code>，其中有一个requements.txt文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">argcomplete</span><br><span class="line"><span class="meta prompt_">argparse&gt;</span><span class="language-bash">=1.2</span></span><br><span class="line">cerberus</span><br><span class="line">coverage</span><br><span class="line"><span class="meta prompt_">empy&gt;</span><span class="language-bash">=3.3</span></span><br><span class="line">future</span><br><span class="line"><span class="meta prompt_">jinja2&gt;</span><span class="language-bash">=2.8</span></span><br><span class="line">jsonschema</span><br><span class="line">kconfiglib</span><br><span class="line">lxml</span><br><span class="line"><span class="meta prompt_">matplotlib&gt;</span><span class="language-bash">=3.0.*</span></span><br><span class="line"><span class="meta prompt_">numpy&gt;</span><span class="language-bash">=1.13</span></span><br><span class="line"><span class="meta prompt_">nunavut&gt;</span><span class="language-bash">=1.1.0</span></span><br><span class="line">packaging</span><br><span class="line"><span class="meta prompt_">pandas&gt;</span><span class="language-bash">=0.21</span></span><br><span class="line">pkgconfig</span><br><span class="line">psutil</span><br><span class="line">pygments</span><br><span class="line"><span class="meta prompt_">wheel&gt;</span><span class="language-bash">=0.31.1</span></span><br><span class="line">pymavlink</span><br><span class="line">pyros-genmsg</span><br><span class="line">pyserial</span><br><span class="line"><span class="meta prompt_">pyulog&gt;</span><span class="language-bash">=0.5.0</span></span><br><span class="line">pyyaml</span><br><span class="line">requests</span><br><span class="line"><span class="meta prompt_">setuptools&gt;</span><span class="language-bash">=39.2.0</span></span><br><span class="line"><span class="meta prompt_">six&gt;</span><span class="language-bash">=1.12.0</span></span><br><span class="line"><span class="meta prompt_">toml&gt;</span><span class="language-bash">=0.9</span></span><br></pre></td></tr></table></figure>

<p>这是官当给出的PX4所需依赖。</p>
<p>在<code>PX4_Firmware/Tools/setup</code>目录下执行命令：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash ubuntu.<span class="keyword">sh</span> --<span class="keyword">no</span>-<span class="keyword">sim</span>-tools </span><br><span class="line">不加参数 --<span class="keyword">no</span>-<span class="keyword">sim</span>-tools，就会自动安装ubuntu版本对应的gazebo及gazebo-dev，和javsim等仿真依赖</span><br></pre></td></tr></table></figure>





<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ninja-build exiftool ninja-build protobuf-compiler libeigen3-dev genromfs xmlstarlet libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev python-pip python3-pip gawk</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip2 install pandas jinja2 pyserial cerberus pyulog==0.7.0 numpy toml pyquaternion empy pyyaml </span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install packaging numpy empy toml pyyaml jinja2 pyargparse</span><br></pre></td></tr></table></figure>

<p><strong>记录</strong></p>
<p>语雀文档中提到的一个错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Collecting pandas</span><br><span class="line">  Using cached https://files.pythonhosted.org/packages/64/f1/8fdbd74edfc31625d597717be8c155c6226fc72a7c954c52583ab81a8614/pandas-1.1.2.tar.gz</span><br><span class="line">    Complete output from command python setup.py egg_info:</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">      File &quot;/tmp/pip-build-qtvsjq8t/pandas/setup.py&quot;, line 349</span><br><span class="line">        f&quot;&#123;extension&#125;-source file &#x27;&#123;sourcefile&#125;&#x27; not found.\n&quot;</span><br><span class="line">                                                             ^</span><br><span class="line">    SyntaxError: invalid syntax</span><br><span class="line">    </span><br><span class="line">    ----------------------------------------</span><br><span class="line">Command &quot;python setup.py egg_info&quot; failed with error code 1 in /tmp/pip-build-qtvsjq8t/pandas/</span><br></pre></td></tr></table></figure>

<p>如果出现该错误，可以先更新setuptools 和 pip。（我没出现过）</p>
<p>更新setuptools命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade setuptools</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">若未报错不需要输入这两行命令</span></span><br><span class="line">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<p>放置一个清华源安装地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>如果报错：网络连接不上，或者下载一半就不下了，然后报错的情况，就在上面的命令后面写上：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip2 install pandas jinja2 pyserial cerberus pyulog==0.7.0 numpy toml pyquaternion empy pyyaml -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>可能的报错如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Could not install packages due to an EnvironmentError: HTTPSConnectionPool(host=&#x27;files.pythonhosted.org&#x27;, port=443): Max retries exceeded with url: /packages/ec/1a/610693ac4ee14fcdf2d9bf3c493370e4f2ef7ae2e19217d7a237ff42367d/packaging-23.2-py3-none-any.whl (Caused by NewConnectionError(&#x27;&lt;urllib3.connection.VerifiedHTTPSConnection object at 0x7fd53ca02c10&gt;: Failed to establish a new connection: [Errno 101] Network is unreachable&#x27;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2><span id="ros一键安装">ROS一键安装</span></h2><p>鱼香肉丝开发的ubuntu一键安装挺不错的，避免了自己安装的很多麻烦，包括编译上的麻烦，换源等诸多问题。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://fishros.com/install -O fishros &amp;&amp; . fishros</span><br></pre></td></tr></table></figure>

<p>Ubuntu 20.04是最后一个支持ROS1的，对应安装ROS1的Noetic，（<em>Ubuntu 22.04只能安装ROS2，ROS2都不是很熟，我安装试了一下，不太会用，所以又用20.04了</em>）</p>
<p>安装时间会比较漫长：安装结束后，使用<code>roscore</code>命令启动ros（<em>ROS2中不再这样启动</em>），出现一大段信息，包括如下信息，即安装成功。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Press Ctrl-C to interrupt</span><br><span class="line">Done checking log file disk usage. Usage is &lt;1GB.</span><br><span class="line"></span><br><span class="line">started roslaunch server http://ubuntu:37819/</span><br><span class="line">ros_comm version 1.16.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SUMMARY</span><br><span class="line">========</span><br><span class="line"></span><br><span class="line">PARAMETERS</span><br><span class="line"> * /rosdistro: noetic</span><br><span class="line"> * /rosversion: 1.16.0</span><br><span class="line"></span><br><span class="line">NODES</span><br><span class="line"></span><br><span class="line">auto-starting new master</span><br><span class="line">process[master]: started with pid [34913]</span><br><span class="line">ROS_MASTER_URI=http://ubuntu:11311/</span><br><span class="line"></span><br><span class="line">setting /run_id to 28b04b30-835b-11ee-87ca-e5b945730283</span><br><span class="line">process[rosout-1]: started with pid [34924]</span><br><span class="line">started core service [/rosout]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>文档里有推荐安装rosdep，</p>
<p><em>rosdep是ros的依赖项管理工具，在安装完ros之后建议安装此工具，但是在rosdep init和 rosdep update时国外的网站实在令人头疼。所以使用rosdepc</em></p>
<p>所以安装一下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install rosdepc</span><br></pre></td></tr></table></figure>

<p>rosdepc需要进行初始化和更新</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rosdepc init</span><br><span class="line">rosdepc update</span><br></pre></td></tr></table></figure>

<p><em>如果之前没有catkin_ws，则需要新建工作空间，之后除去PX4仿真环境启动外，其余ROS相关工程在此工作空间下管理。</em></p>
<p>文档中推荐做法，估计是为了集中管理？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span><br><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/scripts</span><br><span class="line"><span class="built_in">cd</span> catkin_ws &amp;&amp; catkin init <span class="comment"># 使用catkin_make话，则为cd catkin_ws/src &amp;&amp; catkin_init_workspace</span></span><br><span class="line">catkin build <span class="comment"># 使用catkin_make话，则为 cd .. &amp;&amp; catkin_make </span></span><br><span class="line">gedit ~/.bashrc</span><br><span class="line">在下面写入：<span class="built_in">source</span> ~/catkin_ws/devel/setup.bash <span class="comment">#先写好source路径</span></span><br><span class="line">关闭文件，在终端执行</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>

<p>catkin build需要先装catkin-tools（<code>sudo apt install python3-catkin-tools</code>），安装好Ubutu系统应该会有这个命令工具。</p>
<p>文档里说要卸载之前的Gazebo，CSDN博客里给出以下原因</p>
<p><em>XTDrone一般用gazebo9进行仿真，而在安装ros noetic时会自动安装gazebo11以及对应的gazebo-ros插件，这里我们需要卸载，然后安装gazebo9以及肖老师修改过的gazebo-ros插件。</em></p>
<p>感觉也可以用gazebo11来进行仿真，如果比较有时间的话，可以试一试。</p>
<p>感觉Gazebo 11也不是不行，文档里给出可以</p>
<ol>
<li><em>选用Alternative installation: step-by-step的安装方式</em></li>
<li><em>如果安装有依赖问题，可以使用sudo aptitude install &#x3D;&#x3D;gazebo11&#x3D;&#x3D;，选择合理的依赖解决办法（别把ROS删了）</em></li>
<li><em>按步骤装完Gazebo后，升级所有的包 sudo apt upgrade，这样能保证gazebo所有依赖版本一致</em></li>
</ol>
<p>卸载Gazebo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove gazebo* </span><br><span class="line">sudo apt-get remove libgazebo*</span><br><span class="line">sudo apt-get remove ros-noetic-gazebo* #kinetic melodic对应修改</span><br></pre></td></tr></table></figure>

<p>安装Gazebo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a、添加软件仓库 </span><br><span class="line">sudo sh -c &#x27;echo &quot;deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main&quot; &gt; /etc/apt/sources.list.d/gazebo-stable.list&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b、获取密钥</span><br><span class="line">wget https://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c、更新软件源</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d、安装Gazebo 9</span><br><span class="line">sudo apt-get install gazebo9</span><br><span class="line">sudo apt-get install libgazebo9-dev #一定要记得这个</span><br><span class="line">安装Gazebo 11 </span><br><span class="line">sudo apt-get install gazebo11</span><br><span class="line">sudo apt-get install libgazebo11-dev</span><br></pre></td></tr></table></figure>

<p>插件修改的重新编译</p>
<p>安装依赖：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-moveit-msgs ros-noetic-object-recognition-msgs ros-noetic-octomap-msgs ros-noetic-camera-info-manager  ros-noetic-control-toolbox ros-noetic-polled-camera ros-noetic-controller-manager ros-noetic-transmission-interface ros-noetic-joint-limits-interface</span><br></pre></td></tr></table></figure>

<p>然后克隆并编译Gazebo的插件gazebo_ros_pkgs，放在<code>~/catkin_ws/src</code>下（如果编译时还缺其他的依赖，同上方法安装）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws/src</span><br><span class="line">git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git</span><br><span class="line">cd ~/catkin_ws</span><br><span class="line">catkin build</span><br></pre></td></tr></table></figure>

<p>上面需要使用git命令工具，如果没安装过</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install git</span><br></pre></td></tr></table></figure>

<p><code>catkin build</code>后的结果，成功的情况是不会有Error的，（红色的Error看得人心惊肉跳）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Profile:                     default</span><br><span class="line">Extending:             [env] /opt/ros/noetic:/home/sunx/catkin_ws/devel</span><br><span class="line">Workspace:                   /home/sunx/catkin_ws</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Build Space:        [exists] /home/sunx/catkin_ws/build</span><br><span class="line">Devel Space:        [exists] /home/sunx/catkin_ws/devel</span><br><span class="line">Install Space:      [unused] /home/sunx/catkin_ws/install</span><br><span class="line">Log Space:          [exists] /home/sunx/catkin_ws/logs</span><br><span class="line">Source Space:       [exists] /home/sunx/catkin_ws/src</span><br><span class="line">DESTDIR:            [unused] None</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Devel Space Layout:          linked</span><br><span class="line">Install Space Layout:        None</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Additional CMake Args:       None</span><br><span class="line">Additional Make Args:        None</span><br><span class="line">Additional catkin Make Args: None</span><br><span class="line">Internal Make Job Server:    True</span><br><span class="line">Cache Job Environments:      False</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Buildlisted Packages:        None</span><br><span class="line">Skiplisted Packages:         None</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Workspace configuration appears valid.</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">[build] Found 6 packages in 0.0 seconds.                                       </span><br><span class="line">[build] Updating package table.                                                </span><br><span class="line">Starting  &gt;&gt;&gt; gazebo_dev                                                       </span><br><span class="line">Starting  &gt;&gt;&gt; gazebo_msgs                                                      </span><br><span class="line">Finished  &lt;&lt;&lt; gazebo_dev                        [ 1.2 seconds ]                </span><br><span class="line">Finished  &lt;&lt;&lt; gazebo_msgs                       [ 9.4 seconds ]                </span><br><span class="line">Starting  &gt;&gt;&gt; gazebo_ros                                                       </span><br><span class="line">Finished  &lt;&lt;&lt; gazebo_ros                        [ 20.6 seconds ]               </span><br><span class="line">Starting  &gt;&gt;&gt; gazebo_plugins                                                   </span><br><span class="line">Starting  &gt;&gt;&gt; gazebo_ros_control                                               </span><br><span class="line">Finished  &lt;&lt;&lt; gazebo_ros_control                [ 25.8 seconds ]               </span><br><span class="line">Finished  &lt;&lt;&lt; gazebo_plugins                    [ 3 minutes and 41.5 seconds ] </span><br><span class="line">Starting  &gt;&gt;&gt; gazebo_ros_pkgs                                                  </span><br><span class="line">Finished  &lt;&lt;&lt; gazebo_ros_pkgs                   [ 1.3 seconds ]                </span><br><span class="line">[build] Summary: All 6 packages succeeded!                                     </span><br><span class="line">[build]   Ignored:   None.                                                     </span><br><span class="line">[build]   Warnings:  None.                                                     </span><br><span class="line">[build]   Abandoned: None.                                                     </span><br><span class="line">[build]   Failed:    None.                                                     </span><br><span class="line">[build] Runtime: 4 minutes and 13.0 seconds total.                             </span><br><span class="line">[build] Note: Workspace packages have changed, please re-source setup files to use them.</span><br></pre></td></tr></table></figure>

<p>**&#x3D;&#x3D;问题&#x3D;&#x3D;**：<code>git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git</code>有时候无法正常克隆库，会报错。</p>
<p>解决方案一：</p>
<ol>
<li><p>在github网站上下载适用于自己ROS版本的压缩包<a target="_blank" rel="noopener" href="https://github.com/ros-simulation/gazebo_ros_pkgs">ros-simulation&#x2F;gazebo_ros_pkgs: Wrappers, tools and additional API’s for using ROS with Gazebo (github.com)</a></p>
</li>
<li><p>将压缩包放到~&#x2F;catkin_ws&#x2F;src目录下解压缩，一般下载下来的压缩包是zip文件，需要使用unzip命令工具。使用<code>pip install unzip</code>命令安装</p>
</li>
<li><p>使用<code>cd ~/catkin_ws</code>和<code>catkin build</code>进行编译。</p>
</li>
</ol>
<p>编译通过后使用命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roscore </span><br></pre></td></tr></table></figure>

<p>开始ros服务，使用命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source ~/catkin_ws/devel/setup.bash</span><br><span class="line">rosrun gazebo_ros gazebo</span><br></pre></td></tr></table></figure>

<p>开启gazebo，查看安装是否成功。</p>
<p>Gazebo有很多开源的模型文件，<a target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2022/zip/985678/1670494695523-2a18624d-545e-4552-a3b1-714ac5d649c2.zip">📎models.zip</a>下载后将该附件解压缩后放在<code>~/.gazebo</code>中，此时在<code>~/.gazebo/models/</code>路径下可以看到很多模型。如果不做这一步，之后运行Gazebo仿真，可能会缺模型，这时会自动下载，Gazebo模型服务器在国外，自动下载会比较久。</p>
<h2><span id="marvos安装">Marvos安装</span></h2><p>注意，mavros-extras一定别忘记装，否则视觉定位将无法完成</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ros-noetic-mavros ros-noetic-mavros-extras  # for ros-noetic</span><br><span class="line">wget https://gitee.com/robin_shaun/XTDrone/raw/master/sitl_config/mavros/install_geographiclib_datasets.sh</span><br><span class="line"></span><br><span class="line">sudo chmod a+x ./install_geographiclib_datasets.sh</span><br><span class="line">sudo ./install_geographiclib_datasets.sh #这步需要装一段时间</span><br></pre></td></tr></table></figure>



<h2><span id="px4-安装">PX4 安装</span></h2><p>安装方式：从语雀下载压缩包<a target="_blank" rel="noopener" href="https://lark-assets-prod-aliyun.oss-cn-hangzhou.aliyuncs.com/yuque/0/2022/zip/985678/1672148620266-ad2f680e-e9ec-4be0-9746-914552829832.zip?OSSAccessKeyId=LTAI4GGhPJmQ4HWCmhDAn4F5&Expires=1700030561&Signature=jN8jkNF9y0J5GD+A6wGAnGnwSgU=&response-content-disposition=attachment;filename*=UTF-8%27%27PX4_Firmware.zip">PX4_Firmware</a>，使用该压缩包解压编译，&#x3D;&#x3D;从git上下载的代码可能很多方面都要修改，而且下载速度很慢。&#x3D;&#x3D;</p>
<p>使用该包会报错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[0/1] Re-running CMake...</span><br><span class="line">CMake Error: The source directory &quot;/home/robin/PX4_Firmware_13&quot; does not exist.</span><br><span class="line">Specify --help for usage, or press the help button on the CMake GUI.</span><br><span class="line">FAILED: build.ninja </span><br><span class="line">/usr/bin/cmake -H/home/robin/PX4_Firmware_13 -B/home/robin/PX4_Firmware_13/build/px4_sitl_default</span><br><span class="line">ninja: error: rebuilding &#x27;build.ninja&#x27;: subcommand failed</span><br><span class="line">make: *** [Makefile:230: px4_sitl_default] Error 1</span><br></pre></td></tr></table></figure>

<p>主要是编译的CMakeCache.txt文件中的路径都是<code>/home/robin/PX4_Firmware_13</code>（肖老师自己电报的路径），可能编译过不了，然后自己改也是比较麻烦，我尝试改了CMakeCache.txt文件中路径问题，还是报错，还需要改build.ninja文件、cmake_install.cmake等等。这两个文件都在<code>PX4_Firmware_13/build/px4_sitl_default</code>目录下。~~（&#x3D;&#x3D;反正要改很多文件，你就改吧，我是把这个目录下的编译文件都改了一遍，但还是有报错&#x3D;&#x3D;）</p>
<p>这样看用git命令也是可以，可以通过git 克隆代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git clone -b v1.13.2 https://github.com/PX4/PX4-Autopilot.git --recursive</span><br><span class="line">git clone -b v1.13.2 https://github.com.cnpmjs.org/PX4/PX4-Autopilot.git --recursive</span><br><span class="line">mv PX4-Autopilot PX4_Firmware</span><br><span class="line">cd PX4_Firmware</span><br><span class="line">git checkout -b xtdrone/dev v1.13.2</span><br><span class="line">git submodule update --init --recursive</span><br><span class="line">make px4_sitl_default gazebo</span><br></pre></td></tr></table></figure>



<p>好叭，最后还是用的VS code整体修改才可以编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x Tools/check_submodules.sh </span><br><span class="line"><span class="built_in">chmod</span> +x Tools/sitl_run.sh</span><br></pre></td></tr></table></figure>

<p>最好发现还是不行，报错是：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error creating PX4_Firmware/build/px4_sitl_default/etc -&gt; /home/sunx/PX4_Fir</span><br></pre></td></tr></table></figure>

<p>这个错误还显示不全，应该是软连接问题。</p>
<p>克隆又克隆不下来，编译又编译不过，丢。</p>
<p>&#x3D;&#x3D;新的可行方法&#x3D;&#x3D;：</p>
<ol>
<li><p>下载语雀文档中的PX4包，解压后进入PX4_Firmware然后使用命令<code>rm -rf build</code>，删除build文件夹，然后使用命令<code>mkdir build</code></p>
</li>
<li><p>使用命令重新编译</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd build</span><br><span class="line"><span class="function"><span class="title">cmake</span></span> ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用命令</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout -<span class="selector-tag">b</span> xtdrone/dev v1.<span class="number">13.2</span></span><br><span class="line">git submodule update <span class="attr">--init</span> <span class="attr">--recursive</span></span><br><span class="line">make px4_sitl_default gazebo</span><br></pre></td></tr></table></figure></li>
</ol>
<p>终于编译成功了。花了一天和一个晚上</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311161020919.png" alt="image-20231116102030422"></p>
<p>修改 ~&#x2F;.bashrc，加入以下代码,注意路径匹配，前两个source顺序不能颠倒</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配好好路径</span></span><br><span class="line">gedit ~/.bashrc</span><br><span class="line">在里面写入：</span><br><span class="line"><span class="built_in">source</span> ~/catkin_ws/devel/setup.bash</span><br><span class="line"><span class="built_in">source</span> ~/PX4_Firmware/Tools/setup_gazebo.bash ~/PX4_Firmware/ ~/PX4_Firmware/build/px4_sitl_default</span><br><span class="line"><span class="comment">#确保文件最底部是export，而不是source </span></span><br><span class="line"><span class="built_in">export</span> ROS_PACKAGE_PATH=<span class="variable">$ROS_PACKAGE_PATH</span>:~/PX4_Firmware</span><br><span class="line"><span class="built_in">export</span> ROS_PACKAGE_PATH=<span class="variable">$ROS_PACKAGE_PATH</span>:~/PX4_Firmware/Tools/sitl_gazebo</span><br><span class="line"></span><br><span class="line">关闭文件，在终端执行</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>

<p>然后运行如下命令,此时会启动Gazebo,如下图所示。</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~<span class="string">/PX4_Firmware</span></span><br><span class="line">roslaunch px4 mavros_posix_sitl.launch</span><br></pre></td></tr></table></figure>



<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311161025396.png" alt="image-20231116102522130"></p>
<h2><span id="安装qtgroundcontrol">安装QTGroundControl</span></h2><p>第一次安装该软件：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G <span class="keyword">dialout </span>$USER</span><br><span class="line">sudo apt-get remove modemmanager -y</span><br><span class="line">sudo apt <span class="keyword">install </span>gstreamer1.<span class="number">0</span>-plugins-<span class="keyword">bad </span>gstreamer1.<span class="number">0</span>-libav gstreamer1.<span class="number">0</span>-gl -y</span><br><span class="line">sudo apt <span class="keyword">install </span>libqt5gui5 -y</span><br><span class="line">sudo apt <span class="keyword">install </span>libfuse2 -y</span><br></pre></td></tr></table></figure>



<h2><span id="xtdrone下载安装">XTDrone下载安装</span></h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FAILED: <span class="regexp">/home/</span>sunx<span class="regexp">/PX4_Firmware/</span>Tools<span class="regexp">/sitl_gazebo/m</span>odels<span class="regexp">/typhoon_h480/</span>typhoon_h480.sdf </span><br><span class="line">cd <span class="regexp">/home/</span>sunx<span class="regexp">/PX4_Firmware/</span>build<span class="regexp">/px4_sitl_default/</span>build_gazebo &amp;&amp; <span class="regexp">/usr/</span>bin<span class="regexp">/python3 /</span>home<span class="regexp">/sunx/</span>PX4_Firmware<span class="regexp">/Tools/</span>sitl_gazebo<span class="regexp">/scripts/</span>jinja_gen.py <span class="regexp">/home/</span>sunx<span class="regexp">/PX4_Firmware/</span>Tools<span class="regexp">/sitl_gazebo/m</span>odels<span class="regexp">/typhoon_h480/</span>typhoon_h480.sdf.jinja <span class="regexp">/home/</span>sunx<span class="regexp">/PX4_Firmware/</span>Tools/sitl_gazebo --generate_ros_models <span class="keyword">true</span></span><br><span class="line">Traceback (most recent <span class="keyword">call</span> last):</span><br><span class="line">  <span class="keyword">File</span> <span class="string">&quot;/home/sunx/PX4_Firmware/Tools/sitl_gazebo/scripts/jinja_gen.py&quot;</span>, line <span class="number">96</span>, in &lt;module&gt;</span><br><span class="line">    raise Exception(<span class="string">&quot;ERROR: generation would overwrite changes to `&#123;&#125;`. &quot;</span>.format(filename_out) + \</span><br><span class="line">Exception: ERROR: generation would overwrite changes to `<span class="regexp">/home/</span>sunx<span class="regexp">/PX4_Firmware/</span>Tools<span class="regexp">/sitl_gazebo/m</span>odels<span class="regexp">/typhoon_h480/</span>typhoon_h480.sdf`. Changes should only be made to the template <span class="keyword">file</span> `<span class="regexp">/home/</span>sunx<span class="regexp">/PX4_Firmware/</span>Tools<span class="regexp">/sitl_gazebo/m</span>odels<span class="regexp">/typhoon_h480/</span>typhoon_h480.sdf.jinja`. Remove `typhoon_h480.sdf` (after extracting your changes) to disable <span class="keyword">this</span> overwrite protection.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解决方案：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> . -name <span class="string">&quot;typhoon.sdf&quot;</span></span><br><span class="line">然后使用rm 命令删除该文件</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FAILED: external/Stamp/sitl_gazebo/sitl_gazebo-build </span><br><span class="line"><span class="built_in">cd</span> /home/sunx/PX4_Firmware/build/px4_sitl_default/build_gazebo &amp;&amp; /usr/bin/cmake --build /home/sunx/PX4_Firmware/build/px4_sitl_default/build_gazebo -- -j 2</span><br></pre></td></tr></table></figure>

<p>删除文件后，这个问题就可以解决了。</p>
<p>注意，用ctrl+c关闭仿真进程，有可能没有把Gazebo的相关进程关干净，这样再启动仿真时可能会报错。如果出现这种情况，可以用killall -9 gzclient，killall -9 gzserver 这两个命令强行关闭gazebo所有进程。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">killall</span> -<span class="number">9</span> gzclient</span><br><span class="line"><span class="attribute">killall</span> -<span class="number">9</span> gzserver </span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-08T07:12:26.000Z" title="2023/11/8 15:12:26">2023-11-08</time>发表</span><span class="level-item"><time dateTime="2023-12-25T13:34:16.889Z" title="2023/12/25 21:34:16">2023-12-25</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Python/">Python</a></span><span class="level-item">9 分钟读完 (大约1389个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/08/python-%E4%BB%A3%E7%A0%81%E6%8F%92%E6%A1%A9%E6%96%B9%E6%B3%95/">python 代码插桩方法</a></p><div class="content"><h1><span id="python-代码插桩方法">Python 代码插桩方法</span></h1><h2><span id="什么是插桩技术">什么是插桩技术？</span></h2><p>插桩技术是指在保持原有程序逻辑完整性的基础上，在程序中加入探针，通过探针来收集代码在执行过程中的信息（函数参数，返回值、变量变化信息、函数调用顺序等等）。插桩技术在调试代码的过程中也非常实用。通常实现方法是在特定位置插入代码段，从而收集程序运行时的动态上下文信息。</p>
<h2><span id="使用插桩调试">使用插桩调试</span></h2><p>使用插桩技术调试程序，可以有效的查看程序执行过程，并发现代码的逻辑错误（如果代码存在语法错误，编译器会报告该类错误）。逻辑错误往往难以发现，只是运行结果存在问题，但是程序可以正常运行。</p>
<p>例如：最近在写迪杰斯特拉算法和双向迪杰斯特拉算法，两种方法都使用python实现，都能正常运行。一开始，单次运行，两者给出的最短路径都是一样的，以为应该没什么问题，所以写了个测试片段，两个程序执行500次，看一下效率，然后就发现，这500次里，总有些时候，双向迪杰斯特拉和迪杰斯特拉算法的路径不一致，而且迪杰斯特拉算法的效果更好，故疯狂找原因。<strong>这时候就想到了插桩技术！</strong></p>
<h3><span id="python插桩的一种实现方法">python插桩的一种实现方法</span></h3><p>简单地说就是在某些想要输出变量或者函数调用过程的位置，插入一些代码片段。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print_log = <span class="built_in">open</span>(<span class="string">&quot;./logfile.txt&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)	<span class="comment"># 打开一个txt文件作为输出</span></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>), file=print_log)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;var1:&quot;</span>, var1, <span class="string">&quot;function1:&quot;</span>, function1, file=print_log)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;condition1:&quot;</span>, condition1, file=print_log)</span><br></pre></td></tr></table></figure>



<p>这个框架是这样的，利用print函数，将程序运行中的信息输出到txt文件中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dijkstra</span>(<span class="params">graph, start, target</span>):</span><br><span class="line">    print_log = <span class="built_in">open</span>(<span class="string">&quot;./logfile.txt&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)	<span class="comment"># 打开一个txt文件作为输出</span></span><br><span class="line">    <span class="built_in">print</span>(datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>), file=print_log)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>, file=print_log)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> condition <span class="keyword">is</span> <span class="literal">True</span>：</span><br><span class="line">    	<span class="built_in">print</span>(<span class="string">&quot;condition:&quot;</span>, condition, file=print_log)</span><br><span class="line">        ...</span><br><span class="line">        var1 = ?</span><br><span class="line">        var2 = ?</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;var1&quot;</span>, var1, <span class="string">&quot;var2&quot;</span>, var2, file=print_log)</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span> path</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    print_log = <span class="built_in">open</span>(<span class="string">&quot;./logfile.txt&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>), file=print_log)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>, file=print_log)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;graph:&quot;</span>, graph, <span class="string">&quot;start:&quot;</span>, start, <span class="string">&quot;target:&quot;</span>, target, file=print_log)</span><br><span class="line">    dijs_path = dijkstra(graph, start, target)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;result:&quot;</span>, dijs_path)    </span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h3><span id="方式二">方式二</span></h3><p>有的人可能希望不喜欢上述代码插桩的输出格式：</p>
<p>上述代码插桩的输出格式是，程序运行的开始先输出一个程序运行的起始时间，然后开始运行，并输出自己想要的变量变动过程。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (<span class="string">&quot;[%s] %s 修改第 %d 个值，修改后值为:%d&quot;</span> % (time.ctime(time.time()),threadName,counter,<span class="built_in">list</span>[counter-<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>

<p>该行代码的输出风格为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Fri Dec  <span class="number">1</span> 09:<span class="number">54</span>:06 <span class="number">2023</span>] Thread-<span class="number">1</span> 修改第 <span class="number">12</span> 个值，修改后值为:<span class="number">1</span></span><br><span class="line">[Fri Dec  <span class="number">1</span> 09:<span class="number">54</span>:07 <span class="number">2023</span>] Thread-<span class="number">2</span> 修改第 <span class="number">12</span> 个值，修改后值为:<span class="number">2</span></span><br><span class="line">[Fri Dec  <span class="number">1</span> 09:<span class="number">54</span>:07 <span class="number">2023</span>] Thread-<span class="number">1</span> 修改第 <span class="number">11</span> 个值，修改后值为:<span class="number">1</span></span><br><span class="line">[Fri Dec  <span class="number">1</span> 09:<span class="number">54</span>:08 <span class="number">2023</span>] Thread-<span class="number">3</span> 修改第 <span class="number">12</span> 个值，修改后值为:<span class="number">3</span></span><br><span class="line">[Fri Dec  <span class="number">1</span> 09:<span class="number">54</span>:08 <span class="number">2023</span>] Thread-<span class="number">1</span> 修改第 <span class="number">10</span> 个值，修改后值为:<span class="number">1</span></span><br><span class="line">[Fri Dec  <span class="number">1</span> 09:<span class="number">54</span>:09 <span class="number">2023</span>] Thread-<span class="number">2</span> 修改第 <span class="number">11</span> 个值，修改后值为:<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>总体框架：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dijkstra</span>(<span class="params">graph, start, target</span>):</span><br><span class="line">    print_log = <span class="built_in">open</span>(<span class="string">&quot;./logfile.txt&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)	<span class="comment"># 打开一个txt文件作为输出</span></span><br><span class="line">    <span class="built_in">print</span>(datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>), file=print_log)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>, file=print_log)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> condition <span class="keyword">is</span> <span class="literal">True</span>：</span><br><span class="line">    	<span class="built_in">print</span>(<span class="string">&quot;condition:&quot;</span>, condition, file=print_log)</span><br><span class="line">        ...</span><br><span class="line">        var1 = ?</span><br><span class="line">        var2 = ?</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;var1&quot;</span>, var1, <span class="string">&quot;var2&quot;</span>, var2, file=print_log)</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span> path</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    print_log = <span class="built_in">open</span>(<span class="string">&quot;./logfile.txt&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>), file=print_log)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>, file=print_log)</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;[%s] %s 修改第 %d 个值，修改后值为:%d&quot;</span> % (time.ctime(time.time()),threadName,counter,<span class="built_in">list</span>[counter-<span class="number">1</span>]), file=print_log)</span><br><span class="line">    dijs_path = dijkstra(graph, start, target)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;result:&quot;</span>, dijs_path)    </span><br></pre></td></tr></table></figure>



<h2><span id="python-绘图方面的知识">python 绘图方面的知识</span></h2><p>注释有三种，分别为 </p>
<p>ax.text()：文本注释，只能填写文本 </p>
<p>ax.arrow()：箭头标记，不能填写文本</p>
<p>ax.annotate()：箭头注释，在箭头的位置可以填写文本</p>
<p>python 使用matplotlib绘图要注意的事情：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入库</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> mpl_toolkits.axisartist <span class="keyword">as</span> axisartist</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> colors</span><br><span class="line"></span><br><span class="line"><span class="comment">#用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>] </span><br><span class="line"><span class="comment">#用来正常显示负号 #有中文出现的情况，需要u&#x27;内容&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 先声明画布</span></span><br><span class="line"><span class="comment"># figsize=(xx, xx)设置画布大小，画布不能设置太大，不然会报错，最大设置过(64, 64)</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">30</span>, <span class="number">30</span>))	</span><br><span class="line"><span class="comment"># 一个figure 画布对象可以有多个子图axes，通过调用subplot来返回一个子图对象，类似的方法还有add_subplot()</span></span><br><span class="line"><span class="comment"># 函数原型 subplot(numRows, numCols, plotNum), 例如(111)表示共生成一个1行1列的子图对象，即只有一个子图，第三个1表示对第一个子图进行操作</span></span><br><span class="line">ax = plt.subplot(<span class="number">111</span>) </span><br><span class="line"><span class="comment"># ax = plt.subplot(221)，则表示生成2行2列的子图，则共有4个子图对象，1表示对第一个对象进行操作。</span></span><br><span class="line"><span class="comment"># 子图的编号从左上角第一个子图开始，依照从左到右，从上到下的顺序标记</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存当前画布上的图像</span></span><br><span class="line">plt.savefig(<span class="string">&quot;./test_fig.png&quot;</span>)</span><br><span class="line"><span class="comment"># 显示图像，注意这两步不能颠倒，不然会保存一个白板。</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-06T10:18:28.000Z" title="2023/11/6 18:18:28">2023-11-06</time>发表</span><span class="level-item"><time dateTime="2023-11-08T08:28:06.977Z" title="2023/11/8 16:28:06">2023-11-08</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">博客搭建</a></span><span class="level-item">13 分钟读完 (大约1916个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/06/%E9%85%8D%E7%BD%AEicarus/">配置icarus</a></p><div class="content"><h1><span id="配置icarus">配置icarus</span></h1><h3><span id="步骤一下载icarus">步骤一：下载icarus</span></h3><p>github网址：[hexo-theme-icarus](<a target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-icarus">ppoffice&#x2F;hexo-theme-icarus: A simple, delicate, and modern theme for the static site generator Hexo. (github.com)</a>)</p>
<p>可以从这个网址上下载zip文件，解压后，重命名为icarus，并将这个文件夹放置到hexo的theme文件夹下面</p>
<p>也可以通过git命令获取</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ppoffice/hexo-theme-icarus.git themes/icarus -b &lt;version number&gt; --depth 1</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/ppoffice/hexo-theme-icarus.git themes/icarus</span><br></pre></td></tr></table></figure>



<h3><span id="步骤二修改_configyml文件">步骤二：修改_config.yml文件</span></h3><p>需要将_config.yml文件中的theme进行修改</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: icaurs</span><br></pre></td></tr></table></figure>



<h3><span id="步骤三使用shell命令来配置主题">步骤三：使用shell命令，来配置主题</span></h3><p>在对应的文件夹下面，使用Git Bash Here打开shell窗口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo config theme icarus</span><br></pre></td></tr></table></figure>



<p>配置中可能会出现的错误（主要就是缺库）：</p>
<p><strong>缺少semver</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: Cannot find module &#x27;semver&#x27;</span><br></pre></td></tr></table></figure>

<p>该错误是缺少’semver’库，使用npm命令安装即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install semver</span><br></pre></td></tr></table></figure>



<p><strong>缺少相应的依赖</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ERROR Package bulma-stylus is not installed.</span><br><span class="line">ERROR Package hexo-component-inferno is not installed.</span><br><span class="line">ERROR Package hexo-pagination&#x27;s version (3.0.0) does not satisfy the required version (^2.0.0).</span><br><span class="line">ERROR Package hexo-renderer-inferno is not installed.</span><br><span class="line">ERROR Package inferno is not installed.</span><br><span class="line">ERROR Package inferno-create-element is not installed.</span><br><span class="line">ERROR Please install the missing dependencies your Hexo site root directory:</span><br><span class="line">ERROR npm install --save bulma-stylus@0.8.0 hexo-component-inferno@^2.0.2 hexo-pagination@^2.0.0 hexo-renderer-inferno@^0.1.3 inferno@^7.3.3 inferno-create-element@^7.3.3</span><br><span class="line">ERROR or:</span><br><span class="line">ERROR yarn add bulma-stylus@0.8.0 hexo-component-inferno@^2.0.2 hexo-pagination@^2.0.0 hexo-renderer-inferno@^0.1.3 inferno@^7.3.3 inferno-create-element@^7.3.3</span><br></pre></td></tr></table></figure>

<p>使用npm命令进行安装即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save bulma-stylus@0.8.0 hexo-component-inferno@^2.0.2 hexo-pagination@^2.0.0 hexo-renderer-inferno@^0.1.3 inferno@^7.3.3 inferno-create-element@^7.3.3</span><br></pre></td></tr></table></figure>

<p>安装好这一切后，就可以进行相应的配置</p>
<h3><span id="icarus配置">icarus配置</span></h3><p>配置icarus，主要参考了以下的内容</p>
<p><a target="_blank" rel="noopener" href="https://ppoffice.github.io/hexo-theme-icarus/uncategorized/getting-started-with-icarus/">Getting Started with icarus</a></p>
<p>[icarus用户配置](<a target="_blank" rel="noopener" href="https://ppoffice.github.io/hexo-theme-icarus/Configuration/icarus%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/">Icarus用户指南 - 主题配置 - Icarus (ppoffice.github.io)</a>)</p>
<p><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/themes.html">Hexo主题配置</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/82517839">搭建自己的技术博客系列（六）酷炫主题icarus常用配置整合版，快速搞定博客首页 - 知乎 (zhihu.com)</a></p>
<p>首先，要在hexo目录下的_config.yml目录进行修改，主要是对theme设置。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">icarus</span></span><br></pre></td></tr></table></figure>

<p>然后需要根据这个配置文件重新配置hexo，在git bash中输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo config theme icarus</span><br></pre></td></tr></table></figure>

<p>命令执行后，可以发现会在_config.yml文件中生成一个 _config.icarus.yml 文件，这是icarus的配置文件。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Version of the Icarus theme that is currently used</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">5.1</span><span class="number">.0</span> <span class="comment"># Icarus的版本</span></span><br><span class="line"><span class="comment"># 你的网站图标，可以搜索在线图标制作，并将其放在images文件夹中</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/images/favicon.svg</span></span><br><span class="line"><span class="comment"># Additional HTML meta tags in an array.</span></span><br><span class="line"><span class="attr">meta:</span> </span><br><span class="line"><span class="comment"># Path or URL to RSS atom.xml</span></span><br><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br><span class="line"><span class="comment"># 显示在导航栏左侧的网站logo，同样可以自己制作</span></span><br><span class="line"><span class="attr">logo:</span> <span class="string">/images/hxx.jpg</span></span><br><span class="line"><span class="comment"># Open Graph metadata</span></span><br><span class="line"><span class="comment"># https://hexo.io/docs/helpers.html#open-graph</span></span><br><span class="line"><span class="attr">open_graph:</span></span><br><span class="line">    <span class="comment"># Facebook App ID</span></span><br><span class="line">    <span class="attr">fb_app_id:</span> </span><br><span class="line">    <span class="comment"># Facebook Admin ID</span></span><br><span class="line">    <span class="attr">fb_admins:</span> </span><br><span class="line">    <span class="comment"># Twitter ID</span></span><br><span class="line">    <span class="attr">twitter_id:</span> </span><br><span class="line">    <span class="comment"># Twitter site</span></span><br><span class="line">    <span class="attr">twitter_site:</span> </span><br><span class="line">    <span class="comment"># Google+ profile link</span></span><br><span class="line">    <span class="attr">google_plus:</span> </span><br><span class="line"><span class="comment"># Navigation bar link settings</span></span><br><span class="line"><span class="attr">navbar:</span></span><br><span class="line">    <span class="comment">#菜单（显示名称：对应文件夹）</span></span><br><span class="line">    <span class="attr">menu:</span></span><br><span class="line">        <span class="string">主页:</span> <span class="string">/</span></span><br><span class="line">        <span class="string">归档:</span> <span class="string">/archives</span></span><br><span class="line">        <span class="string">分类:</span> <span class="string">/categories</span></span><br><span class="line">        <span class="string">标签:</span> <span class="string">/tags</span></span><br><span class="line">        <span class="string">关于:</span> <span class="string">/about</span></span><br><span class="line">    <span class="comment"># 导航栏右侧图标链接</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">        <span class="attr">My GitHub:</span></span><br><span class="line">            <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">&#x27;https://github.com/h2pl/&#x27;</span></span><br><span class="line"><span class="comment"># Footer section link settings</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">    <span class="comment"># 页脚图标链接</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">        <span class="attr">Creative Commons:</span></span><br><span class="line">            <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-creative-commons</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">&#x27;https://creativecommons.org/&#x27;</span></span><br><span class="line">        <span class="attr">Attribution 4.0 International:</span></span><br><span class="line">            <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-creative-commons-by</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">&#x27;https://creativecommons.org/licenses/by/4.0/&#x27;</span></span><br><span class="line">        <span class="attr">Download on GitHub:</span></span><br><span class="line">            <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">&#x27;https://github.com/ppoffice/hexo-theme-icarus&#x27;</span></span><br><span class="line"><span class="comment"># 文章显示设置</span></span><br><span class="line"><span class="attr">article:</span></span><br><span class="line">    <span class="comment">#代码主题atom-one-light亮色，atom-one-dark暗色</span></span><br><span class="line">    <span class="attr">highlight:</span></span><br><span class="line">        <span class="comment"># Code highlight themes</span></span><br><span class="line">        <span class="comment"># https://github.com/highlightjs/highlight.js/tree/master/src/styles</span></span><br><span class="line">        <span class="attr">theme:</span> <span class="string">atom-one-dark</span></span><br><span class="line">        <span class="comment"># Show code copying button</span></span><br><span class="line">        <span class="attr">clipboard:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># Default folding status of the code blocks. Can be &quot;&quot;, &quot;folded&quot;, &quot;unfolded&quot;</span></span><br><span class="line">        <span class="attr">fold:</span> <span class="string">unfolded</span></span><br><span class="line">    <span class="comment"># 是否显示文章主图</span></span><br><span class="line">    <span class="attr">thumbnail:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 是否显示估算阅读时间</span></span><br><span class="line">    <span class="attr">readtime:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 搜索插件设置</span></span><br><span class="line"><span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/categories/Plugins/Search</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">    <span class="comment"># Name of the search plugin</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">insight</span></span><br><span class="line"><span class="comment"># 评论插件设置</span></span><br><span class="line"><span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/categories/Plugins/Comment</span></span><br><span class="line"><span class="attr">comment:</span></span><br><span class="line">    <span class="comment">#可选valine，disqus（科学上网）等</span></span><br><span class="line">    <span class="comment"># Name of the comment plugin</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">retro</span> <span class="comment"># Gravatar style : mm/identicon/monsterid/wavatar/retro/hide</span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">要不要说点啥...</span> <span class="comment"># Comment Box placeholder</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">valine</span></span><br><span class="line">    <span class="attr">shortname:</span> <span class="string">黄小斜</span></span><br><span class="line"><span class="comment"># 打赏功能</span></span><br><span class="line"><span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/categories/Donation/</span></span><br><span class="line"><span class="attr">donate:</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># 阿里巴巴支付宝</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">alipay</span></span><br><span class="line">        <span class="comment"># 二维码图片</span></span><br><span class="line">        <span class="attr">qrcode:</span> <span class="string">&#x27;/images/hxx.jpg&#x27;</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># 微信</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">wechat</span></span><br><span class="line">        <span class="comment"># 二维码图片</span></span><br><span class="line">        <span class="attr">qrcode:</span> <span class="string">&#x27;/images/hxx.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分享插件设置</span></span><br><span class="line"><span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/categories/Plugins/Share</span></span><br><span class="line"><span class="attr">share:</span></span><br><span class="line">    <span class="comment"># Share plugin name</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">sharejs</span></span><br><span class="line"><span class="comment"># Sidebar settings.</span></span><br><span class="line"><span class="comment"># Please be noted that a sidebar is only visible when it has at least one widget</span></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">    <span class="comment"># 左侧边栏设置</span></span><br><span class="line">    <span class="attr">left:</span></span><br><span class="line">        <span class="comment"># 是否不随页面滚动</span></span><br><span class="line">        <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Configuration/Theme/make-a-sidebar-sticky-when-page-scrolls/</span></span><br><span class="line">        <span class="attr">sticky:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># right sidebar settings</span></span><br><span class="line">    <span class="attr">right:</span></span><br><span class="line">        <span class="comment"># 是否不随页面滚动</span></span><br><span class="line">        <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Configuration/Theme/make-a-sidebar-sticky-when-page-scrolls/</span></span><br><span class="line">        <span class="attr">sticky:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># 边栏小部件设置</span></span><br><span class="line"><span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/categories/Widgets/</span></span><br><span class="line"><span class="attr">widgets:</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">profile</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">        <span class="comment"># Author name to be shown in the profile widget</span></span><br><span class="line">        <span class="attr">author:</span> <span class="string">黄小斜</span></span><br><span class="line">        <span class="comment"># Title of the author to be shown in the profile widget</span></span><br><span class="line">        <span class="attr">author_title:</span> <span class="string">蚂蚁金服Java工程师</span></span><br><span class="line">        <span class="comment"># Author&#x27;s current location to be shown in the profile widget</span></span><br><span class="line">        <span class="attr">location:</span> <span class="string">浙江</span> <span class="string">杭州</span></span><br><span class="line">        <span class="comment"># Path or URL to the avatar to be shown in the profile widget</span></span><br><span class="line">        <span class="attr">avatar:</span> <span class="string">/images/gzh.jpg</span></span><br><span class="line">        <span class="comment"># Email address for the Gravatar to be shown in the profile widget</span></span><br><span class="line">        <span class="attr">gravatar:</span> </span><br><span class="line">        <span class="comment"># Whether to show avatar image rounded or square</span></span><br><span class="line">        <span class="attr">avatar_rounded:</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment"># 关注我的链接，可设为你的GitHub主页</span></span><br><span class="line">        <span class="attr">follow_link:</span> <span class="string">&#x27;https://github.com/h2pl/&#x27;</span></span><br><span class="line">        <span class="comment"># 个人介绍部件底部图标社交链接</span></span><br><span class="line">        <span class="attr">social_links:</span></span><br><span class="line">            <span class="attr">Github:</span></span><br><span class="line">                <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">                <span class="attr">url:</span> <span class="string">&#x27;https://github.com/h2pl&#x27;</span></span><br><span class="line">            <span class="attr">RSS:</span></span><br><span class="line">                <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-rss</span></span><br><span class="line">                <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">toc</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">links</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">        <span class="comment"># Links to be shown in the links widget</span></span><br><span class="line">        <span class="attr">links:</span></span><br><span class="line">            <span class="attr">CSDN:</span> <span class="string">&#x27;https://blog.csdn.net/a724888&#x27;</span></span><br><span class="line">            <span class="string">知乎:</span> <span class="string">&#x27;https://www.zhihu.com/people/h2pl/activities&#x27;</span></span><br><span class="line">            <span class="string">简书:</span> <span class="string">&#x27;https://www.zhihu.com/people/h2pl/activities&#x27;</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">category</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">tagcloud</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">recent_posts</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">archive</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Widget name</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">tag</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left or right</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line"><span class="comment"># Other plugin settings</span></span><br><span class="line"><span class="attr">plugins:</span></span><br><span class="line">    <span class="comment"># Enable page animations</span></span><br><span class="line">    <span class="attr">animejs:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Enable the lightGallery and Justified Gallery plugins</span></span><br><span class="line">    <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Plugins/General/gallery-plugin/</span></span><br><span class="line">    <span class="attr">gallery:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Enable the Outdated Browser plugin</span></span><br><span class="line">    <span class="comment"># http://outdatedbrowser.com/</span></span><br><span class="line">    <span class="attr">outdated-browser:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Enable the MathJax plugin</span></span><br><span class="line">    <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Plugins/General/mathjax-plugin/</span></span><br><span class="line">    <span class="attr">mathjax:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show the back to top button on mobile devices</span></span><br><span class="line">    <span class="attr">back-to-top:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Google Analytics plugin settings</span></span><br><span class="line">    <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Plugins/General/site-analytics-plugin/#Google-Analytics</span></span><br><span class="line">    <span class="attr">google-analytics:</span></span><br><span class="line">        <span class="comment"># Google Analytics tracking id</span></span><br><span class="line">        <span class="attr">tracking_id:</span> </span><br><span class="line">    <span class="comment"># Baidu Analytics plugin settings</span></span><br><span class="line">    <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Plugins/General/site-analytics-plugin/#Baidu-Analytics</span></span><br><span class="line">    <span class="attr">baidu-analytics:</span></span><br><span class="line">        <span class="comment"># Baidu Analytics tracking id</span></span><br><span class="line">        <span class="attr">tracking_id:</span> <span class="string">2289335dd443797b5867abbd156e7575</span></span><br><span class="line">    <span class="comment"># Hotjar user feedback plugin</span></span><br><span class="line">    <span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Plugins/General/site-analytics-plugin/#Hotjar</span></span><br><span class="line">    <span class="attr">hotjar:</span></span><br><span class="line">        <span class="comment"># Hotjar site id</span></span><br><span class="line">        <span class="attr">site_id:</span> </span><br><span class="line">    <span class="comment"># Show a loading progress bar at top of the page</span></span><br><span class="line">    <span class="attr">progressbar:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># BuSuanZi site/page view counter</span></span><br><span class="line">    <span class="comment"># https://busuanzi.ibruce.info</span></span><br><span class="line">    <span class="attr">busuanzi:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># CDN provider settings</span></span><br><span class="line"><span class="comment"># https://ppoffice.github.io/hexo-theme-icarus/Configuration/Theme/speed-up-your-site-with-custom-cdn/</span></span><br><span class="line"><span class="comment"># Show PV/UV of the website/page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="comment"># count values only if the other configs are false</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># custom uv span for the whole site</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_uv_header:</span> <span class="string">访客数</span></span><br><span class="line">  <span class="attr">site_uv_footer:</span> <span class="string">人</span></span><br><span class="line">  <span class="comment"># custom pv span for the whole site</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv_header:</span> <span class="string">总访问量</span></span><br><span class="line">  <span class="attr">site_pv_footer:</span> <span class="string">次</span></span><br><span class="line">  <span class="comment"># custom pv span for one page only</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-file-o&quot;&gt;&lt;/i&gt;</span>  <span class="string">阅读数</span></span><br><span class="line">  <span class="attr">page_pv_footer:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">providers:</span></span><br><span class="line">    <span class="comment"># Name or URL of the JavaScript and/or stylesheet CDN provider</span></span><br><span class="line">    <span class="attr">cdn:</span> <span class="string">jsdelivr</span></span><br><span class="line">    <span class="comment"># Name or URL of the webfont CDN provider</span></span><br><span class="line">    <span class="attr">fontcdn:</span> <span class="string">google</span></span><br><span class="line">    <span class="comment"># Name or URL of the webfont Icon CDN provider</span></span><br><span class="line">    <span class="attr">iconcdn:</span> <span class="string">fontawesome</span></span><br></pre></td></tr></table></figure>



<p>Hexo配置好后，使用命令进行更新，并在本地进行查看</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>



<p>当一切配置完成后，需要讲配置好的文件，传输到gitee上，并进行更新。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>然后需要在gitee上进行更新，才能在gitee上看出来。</p>
<p><img src="https://duohangsun-gitee.oss-cn-shanghai.aliyuncs.com/duohangsun-gitee-img/202311061806052.png" alt="更新"></p>
<p>这样就可以完成icarus主题配置。</p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="SUNX"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">SUNX</p><p class="is-size-6 is-block">研究生</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>上海</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">60</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">27</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="/null"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://blog.csdn.net/weixin_43571647?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">知乎</span></span></a></li><li><a class="level is-mobile" href="" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">简书</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/C-%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">C++学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/MATLAB/"><span class="level-start"><span class="level-item">MATLAB</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/excel%E6%93%8D%E4%BD%9C/"><span class="level-start"><span class="level-item">excel操作</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"><span class="level-start"><span class="level-item">博客搭建</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8E%9F%E5%88%9B/"><span class="level-start"><span class="level-item">原创</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%9B%BE%E8%AE%BA/"><span class="level-start"><span class="level-item">图论</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%BA%E6%96%87/"><span class="level-start"><span class="level-item">论文</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/"><span class="level-start"><span class="level-item">路径规划</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E5%90%AF%E5%8F%91%E5%BC%8F/"><span class="level-start"><span class="level-item">路径规划启发式</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">路径规划算法</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-03T10:45:41.000Z">2024-03-03</time></p><p class="title"><a href="/2024/03/03/Hierachical-A-Searching-Abstraction-Hierarchies-Efficiently/">Hierachical A: Searching Abstraction Hierarchies Efficiently</a></p><p class="categories"><a href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-01T06:17:52.000Z">2024-03-01</time></p><p class="title"><a href="/2024/03/01/The-Grid-Based-Path-Planning-Competition-2014-Entries-and-Results/">The Grid-Based Path Planning Competition 2014 Entries and Results</a></p><p class="categories"><a href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-29T08:06:51.000Z">2024-02-29</time></p><p class="title"><a href="/2024/02/29/Near-Optimal-Hierarchical-Path-Finding/">Near Optimal Hierarchical Path-Finding</a></p><p class="categories"><a href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-29T07:45:43.000Z">2024-02-29</time></p><p class="title"><a href="/2024/02/29/Using-the-Hierarchical-Pathfinding-A-Algorithm-in-GIS-to-Find-Paths-through-Rasters-with-Nonuniform-Traversal-Cost/">Using the Hierarchical Pathfinding A Algorithm in GIS to Find Paths through Rasters with Nonuniform Traversal Cost</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-28T15:35:45.000Z">2024-02-28</time></p><p class="title"><a href="/2024/02/28/Hierachical-Path-Planning-for-Multi-Size-Agents-in-Heterogeneous-Environments/">Hierachical Path Planning for Multi-Size Agents in Heterogeneous Environments</a></p><p class="categories"><a href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">37</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C-%E5%AD%A6%E4%B9%A0/"><span class="tag">C++学习</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CLion%E5%AE%89%E8%A3%85/"><span class="tag">CLion安装</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GDAL/"><span class="tag">GDAL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hierachical/"><span class="tag">Hierachical</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MAPF/"><span class="tag">MAPF</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MATLAB/"><span class="tag">MATLAB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Q1/"><span class="tag">Q1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XTDrone/"><span class="tag">XTDrone</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B1%82/"><span class="tag">分层</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B1%82%E6%96%B9%E6%B3%95/"><span class="tag">分层方法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8E%9F%E5%88%9B/"><span class="tag">原创</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8E%9F%E6%96%87%E7%BF%BB%E8%AF%91/"><span class="tag">原文翻译</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%AF%E8%A7%86%E5%9B%BE/"><span class="tag">可视图</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%AF%E5%8F%91%E5%BC%8F/"><span class="tag">启发式</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BE%E8%AE%BA%E7%9F%A5%E8%AF%86/"><span class="tag">图论知识</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93/"><span class="tag">多智能体</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"><span class="tag">环境配置</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/"><span class="tag">离散数学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%B4%E8%AF%BA%E5%9B%BE/"><span class="tag">维诺图</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%BC%E8%BF%B0/"><span class="tag">综述</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BF%BB%E8%AF%91/"><span class="tag">翻译</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95/"><span class="tag">蚁群算法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/"><span class="tag">路径规划</span><span class="tag">6</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SUNX的记录" height="28"></a><p class="is-size-7"><span>&copy; 2024 SUNX</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>